"use strict";var log=function(){},$manifest$author$email="a.poberiy@plsolutions.ru",$manifest$author$name="Alexey Pobery",$manifest$author$organization="PureQML",$manifest$author$site="https://pureqml.com",$manifest$cssAutoClassificator=!1,$manifest$cssDisableTransformations=!1,$manifest$cssDisableTransitions=!1,$manifest$disableAnimations=!1,$manifest$emulateRemoteKeys=!1,$manifest$expectRunContextEvent=!1,$manifest$html5$prefix="",$manifest$iconColor="#25B04B",$manifest$log$disable=!1,$manifest$requireExplicitRecursiveVisibilityStyle=!1,$manifest$requireVerticalTextAlignmentStyle=!1,$manifest$resolutionHeight=1280,$manifest$resolutionWidth=1280,$manifest$style$font$family="Poker",$manifest$style$font$lineHeight=1.2,$manifest$style$font$pixelSize=16,$manifest$style$font$pointSize=0,$manifest$style$font$weight=400,$manifest$system$fingerprint=!1,$manifest$title="twntyone",$manifest$trace$focus=!1,$manifest$trace$keys=!1,$manifest$trace$listeners=!1,$manifest$useNativeFocusForInput=!0,$manifest$virtual$height=720,$manifest$virtual$width=1280,qml=function(){var i={},x=i;x.src||(x.src={});var d=x.src;x.web||(x.web={});x.web;x.controls||(x.controls={});x.controls;x.controls.core||(x.controls.core={});var t=x.controls.core;x.controls.mixins||(x.controls.mixins={});var r=x.controls.mixins;x.controls.pure||(x.controls.pure={});x.controls.pure;x.video||(x.video={});x.video;x.video.html5||(x.video.html5={});x.video.html5;x.html5||(x.html5={});var a=x.html5;x.core||(x.core={});var P=x.core;x.core.core=function(){var i=x;P.device=0,P.vendor="",P.__videoBackends={},"undefined"!=typeof navigator?(i.core.os=navigator.platform,i.core.userAgent=navigator.userAgent,i.core.language=navigator.language):(i.core.os="unknown",i.core.userAgent="Unknown");var t=function(t,e){i.core.userAgent.indexOf(t)<0||(i.core.vendor=e.vendor,i.core.device=e.device,i.core.os=e.os)};i.core.vendor||(t("Blackberry",{vendor:"blackberry",device:2,os:"blackberry"}),t("Android",{vendor:"google",device:2,os:"android"}),t("iPhone",{vendor:"apple",device:2,os:"iOS"}),t("iPad",{vendor:"apple",device:2,os:"iOS"}),t("iPod",{vendor:"apple",device:2,os:"iOS"})),0<=i.core.userAgent.indexOf("Chromium")?i.core.browser="Chromium":0<=i.core.userAgent.indexOf("Chrome")?i.core.browser="Chrome":0<=i.core.userAgent.indexOf("Opera")?i.core.browser="Opera":0<=i.core.userAgent.indexOf("Firefox")?i.core.browser="Firefox":0<=i.core.userAgent.indexOf("Safari")?i.core.browser="Safari":0<=i.core.userAgent.indexOf("MSIE")?i.core.browser="IE":0<=i.core.userAgent.indexOf("YaBrowser")?i.core.browser="Yandex":i.core.browser="",x._backend=function(){return x.html5.html},x.core.__locationBackend=function(){return x.html5.location},x.core.__localStorageBackend=function(){return x.html5.localstorage},x.core.__videoBackends.html5=function(){return x.video.html5.backend},x.core.__deviceBackend=function(){return x.web.device};var e={13:"Select",16:"Shift",17:"Ctrl",18:"LeftAlt",27:"Back",37:"Left",32:"Space",33:"PageUp",34:"PageDown",36:"Menu",38:"Up",39:"Right",40:"Down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if($manifest$emulateRemoteKeys){var n={112:"Red",113:"Green",114:"Yellow",115:"Blue",219:"Red",221:"Green",186:"Yellow",222:"Blue",230:"RightAlt",187:"VolumeUp",189:"VolumeDown",191:"Mute",107:"VolumeUp",109:"VolumeDown",111:"Mute"};for(var o in n)e[o]=n[o]}i.core.keyCodes=e,i.closeApp=function(){window.close()},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},o=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o},null===log&&(log=function(){for(var t="",e=0;e<arguments.length;++e)t+=arguments[e]+" ";console.log(t)})),null===log&&(log=console.log.bind(console));var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32","":"",transparent:"0000"};i.core.safeCall=function(e,i,n){return function(t){return function(t,e,i,n){try{return t.apply(e,i)}catch(t){n(t)}}(t,e,i,n)}},i.core.assign=function(t,e,i){for(var n=(e=e.split(".")).length-1,o=0;o<n;++o)t=t[e[o]];t[e[n]]=i},P.getKeyCodeByName=function(t){var e=P.keyCodes;for(var i in e)if(e[i]===t)return~~i};var r=P.CoreObject=function(t){this._local=Object.create(t?t._local:null)},a=r.prototype;a.componentName="core.CoreObject",a.constructor=r,a.$c=function(){},a.$s=function(){},a.__init=function(){var t={};this.$c(t),this.$s(t),this.completed()},a.__complete=function(){},a._get=function(t,e){if(t in this)return this[t];if(t in this._local)return this._local[t];if(e)return null;throw new Error("invalid property requested: '"+t+"'")};var l=P.Color=function(t){if(Array.isArray(t))return this.r=t[0],this.g=t[1],this.b=t[2],void(this.a=void 0!==t[3]?t[3]:255);if("string"!=typeof t)return this.r=this.b=this.a=255,this.g=0,void log("invalid color specification: "+t,(new Error).stack);var e;if("#"===t[0])e=t.substring(1);else{if("rgba"===t.substring(0,4)){var i=t.indexOf("("),n=t.lastIndexOf(")");return t=t.substring(i+1,n).split(","),this.r=parseInt(t[0],10),this.g=parseInt(t[1],10),this.b=parseInt(t[2],10),void(this.a=Math.floor(255*parseFloat(t[3])))}e=c[t]}if(!e)return this.r=this.b=this.a=255,this.g=0,void log("invalid color specification: "+t,(new Error).stack);var o=e.length;if(3===o||4===o){var r=parseInt(e[0],16),a=parseInt(e[1],16),s=(i=parseInt(e[2],16),4===o?parseInt(e[3],16):15);this.r=r<<4|r,this.g=a<<4|a,this.b=i<<4|i,this.a=s<<4|s}else{if(6!==o&&8!==o)throw new Error("invalid color specification: "+t);this.r=parseInt(e.substring(0,2),16),this.g=parseInt(e.substring(2,4),16),this.b=parseInt(e.substring(4,6),16),this.a=8===o?parseInt(e.substring(6,8),16):255}};l.interpolate=function(t,e,i){t instanceof l||(t=new l(t)),e instanceof l||(e=new l(e));var n=function(t,e,i){return Math.floor(i*(t-e)+e)},o=n(t.r,e.r,i),r=n(t.g,e.g,i),a=n(t.b,e.b,i),s=n(t.a,e.a,i);return new l([o,r,a,s])},l.normalize=function(t){return t instanceof l?t:new l(t)};var s=l.prototype;s.constructor=P.Color,s.rgba=s.toString=function(){var t=this.a;return 255==t?"rgb("+this.r+","+this.g+","+this.b+")":"rgba("+this.r+","+this.g+","+this.b+","+t/255+")"};var d=function(t){var e=t>>4&15,i=15&t;return e+=9<e?87:48,i+=9<i?87:48,String.fromCharCode(e,i)};s.hex=function(){return"#"+d(this.r)+d(this.g)+d(this.b)+d(this.a)},s.ahex=function(){return"#"+d(this.a)+d(this.r)+d(this.g)+d(this.b)},i.addLazyProperty=function(e,r,a){var i=function(t){var e=t.__properties,i=e[r];if(void 0!==i){if(void 0===i.value){i.value=a(t);for(var n=i.onChanged,o=0;o<n.length;++o)i.callOnChangedWithCurrentValue(t,r,n[o])}return i}return e[r]=new g(a(t))};Object.defineProperty(e,r,{get:function(){return i(this).value},set:function(t){if(!i(this).forwardSet(this,r,t,null))throw new Error("could not set lazy property "+r+" in "+e.componentName)},enumerable:!0})},i.addConstProperty=function(t,e,i){Object.defineProperty(t,e,{get:function(){return i.call(this)},set:function(t){throw new Error("could not set const property")},enumerable:!0})};var g=function(t){this.value=t,this.onChanged=[]},h=(i.PropertyStorage=g).prototype;h.getAnimation=function(t,e){var i=this.animation;return i&&i.enabled()&&0<i.duration&&!i._native&&i._context._completed?i:null},h.__removeUpdater=function(t){for(var e=this.deps,i=0,n=e.length;i<n;i+=2){var o=e[i],r=e[i+1];o.removeOnChanged(r,t)}},h.removeUpdater=function(){var t=this.callback;void 0!==t&&(this.__removeUpdater(t),this.deps=this.callback=void 0)},h.replaceUpdater=function(t,e,i){var n=this.callback;void 0!==n&&this.__removeUpdater(n),this.callback=e,this.deps=i;for(var o=t.connectOnChanged,r=0,a=i.length;r<a;r+=2){var s=i[r],c=i[r+1];o.call(t,s,c,e,!0)}e()},h.forwardSet=function(n,o,t,e){var i=this.getCurrentValue(e);if(null!==i&&i instanceof Object){var r;if(void 0===(r=i.defaultProperty))return!1;var a=i[r];return t!==a&&(i[r]=t,this.callOnChanged(n,o,t,a)),!0}if(t instanceof Object)return void 0===(r=t.defaultProperty)||n.connectOnChanged(t,r,function(t,e){var i=n.__properties[o];void 0!==i&&i.callOnChanged(n,o,t,e)}),!1},h.discard=function(){var t=this.getAnimation();t&&t.complete(),this.onChanged=[]},h.getSimpleValue=function(t){var e=this.value;return void 0!==e?e:t},h.getCurrentValue=function(t){var e=this.interpolatedValue;return void 0!==e?e:this.getSimpleValue(t)},h.setCurrentValue=function(t,e,i,n){var o=this.value;this.interpolatedValue=void 0,this.value=i,n&&this.callOnChanged(t,e,i,o)},h.set=function(t,e,i,n,o){var r=this.value;void 0===r&&(r=n),r!==i&&(this.forwardSet(t,e,i,n)||(this.value=i,o&&this.callOnChanged(t,e,i,r)))};var p=function(t,e,i,n){var o=t["__changed__"+e],r=void 0!==o,a=void 0!==n;if(r||a){var s=P.safeCall(t,[i],function(t){log("on "+e+" changed callback failed: ",t,t.stack)});r&&o.forEach(s),a&&n.forEach(s)}};h.callOnChanged=function(t,e,i){p(t,e,i,this.onChanged)},h.callOnChangedWithCurrentValue=function(t,e,i){if(0!==this.onChanged.length){var n=this.value;if(void 0!==n)P.safeCall(t,[n],function(t){log("on "+e+" changed callback failed: ",t,t.stack)})(i)}},h.removeOnChanged=function(t){var e=this.onChanged,i=e.indexOf(t);if(0<=i)return e.splice(i,1)};var _=i.getDefaultValueForType=function(t){switch(t){case"enum":case"int":return 0;case"bool":return!1;case"real":return 0;case"string":return"";case"array":return[];case"color":case"Color":return"#0000";case"date":case"Date":return new Date;default:return t[0].toUpperCase()===t[0]?null:void 0}},m=(i.convertTo=function(t,e){switch(t){case"enum":case"int":return~~e;case"bool":return!!e;case"real":return+e;case"string":return String(e);case"date":case"Date":return Date(e);default:return e}},i.getConvertFunction=function(t){switch(t){case"enum":case"int":return function(t){return~~t};case"bool":return function(t){return!!t};case"real":return function(t){return+t};case"string":return function(t){return String(t)};case"date":case"Date":return function(t){return new Date(t)};default:return function(t){return t}}});i.hasProperty=function(t,e){return e in t},i.addProperty=function(t,e,h,p){var u=m(e),i=function(t){switch(t){case"int":case"real":case"color":case"Color":return!0;default:return!1}}(e);p=void 0!==p?u(p):_(e);var f=function(t){var e=this.__properties,i=e[h];if(void 0===i){if(t===p)return;i=e[h]=new g(p)}return i};Object.defineProperty(t,h,{get:i?function(){var t=this.__properties[h];return void 0!==t?t.getCurrentValue(p):p}:function(){var t=this.__properties[h];return void 0!==t?t.getSimpleValue(p):p},set:i?function(t){t=u(t);var e=f.call(this,t);if(void 0!==e){var i=e.getAnimation();if(i&&e.value!==t){var n=this._context,o=n.backend;e.frameRequest&&o.cancelAnimationFrame(e.frameRequest),e.started=Date.now();var r=e.getCurrentValue(p),a=t,s=this,c=function(){e.frameRequest&&(o.cancelAnimationFrame(e.frameRequest),e.frameRequest=void 0),e.frameRequestDelayed&&(clearTimeout(e.frameRequestDelayed),e.frameRequestDelayed=void 0),i.complete=function(){},e.interpolatedValue=void 0,e.started=void 0,i.running=!1,e.callOnChanged(s,h,a,r)},l=i.duration,d=n.wrapNativeCallback(function(){var t=1*(Date.now()-e.started)/l;1<=t||!i.active()?c():(e.interpolatedValue=u(i.interpolate(a,r,t)),e.callOnChanged(s,h,e.getCurrentValue(p),r),e.frameRequest=o.requestAnimationFrame(d))});i.delay<=0?e.frameRequest=o.requestAnimationFrame(d):e.frameRequestDelayed=setTimeout(d,i.delay),i.running=!0,i.complete=c}e.set(this,h,t,p,!i)}}:function(t){t=u(t);var e=f.call(this,t);void 0!==e&&e.set(this,h,t,p,!0)},enumerable:!0})},i.addAliasProperty=function(i,n,t,e){var o=t();Object.defineProperty(i,n,{get:function(){return o[e]},set:function(t){o[e]=t},enumerable:!0}),i.connectOnChanged(o,e,function(t){var e=i.__properties[n];void 0!==e?e.callOnChanged(i,n,t):p(i,n,t)})},P.createSignal=function(t){return function(){this.emitWithArgs(t,arguments)}},P.createSignalForwarder=function(t,e){return function(){t.emitWithArgs(e,arguments)}},P.EventBinder=function(t){this.target=t,this.callbacks={},this.enabled=!1},P.EventBinder.prototype.on=function(t,e){if(t in this.callbacks)throw new Error("double adding of event ("+t+")");this.callbacks[t]=e,this.enabled&&this.target.on(t,e)},P.EventBinder.prototype.constructor=P.EventBinder,P.EventBinder.prototype.enable=function(t){if(t!=this.enabled){var e=this.target;if(this.enabled=t)for(var i in this.callbacks)e.on(i,this.callbacks[i]);else for(var i in this.callbacks)e.removeListener(i,this.callbacks[i])}};var u=function(t,e,i,n){var o=t+i,r=e[o];if(void 0!==r)if(e.hasOwnProperty(o))r.push(n);else{var a=r.slice();a.push(n),e[o]=a}else e[o]=[n]};P._protoOn=function(t,e,i){u("__on__",t,e,i)},P._protoOnChanged=function(t,e,i){u("__changed__",t,e,i)},P._protoOnKey=function(t,e,i){u("__key__",t,e,i)},P.callMethod=function(t,e){if(t){for(var i=arguments.length,n=new Array(i-1),o=0,r=1;r<i;)n[o++]=arguments[r++];e in t&&t[e].apply(t,n)}};var f=function(t){this._callback=t,this._queue=[],this.history=[]},y=f.prototype;return y.constructor=f,y.unshift=function(){var t=this._queue;t.unshift.apply(t,arguments)},y.push=function(){var t=this._queue;t.push.apply(t,arguments)},y.enumerate=function(t,e){var i=[this,e],n=this._queue;for(n.unshift(t);n.length;){var o=n.shift();if(this.history.push(o),this._callback.apply(o,i))break}},i.forEach=function(t,e,i){return new f(e).enumerate(t,i),i},i.createObject=function(t){t.__init();var e=t.parent;"_updateVisibilityForChild"in e&&e._updateVisibilityForChild(t,e.recursiveVisible),"_tryFocus"in e&&e._tryFocus(),t._context.scheduleComplete()},i}();var s=x.core.core,n=P.CoreObject,e=n.prototype,o=P.EventEmitter=function(t,e){n.apply(this,arguments),this._eventHandlers={},this._onConnections=[]},c=o.prototype=Object.create(e);c.constructor=o,c.componentName="core.EventEmitter",c.discard=function(){for(var t in this.removeAllOn(),this._eventHandlers)this.removeAllListeners(t)},c.removeAllOn=function(){for(var t=this._onConnections,e=0,i=t.length;e<i;e+=3)t[e].removeListener(t[e+1],t[e+2]);this._onConnections=[]},c.removeAllListeners=function(t){delete this._eventHandlers[t]},c.emit=function(e){if(""===e)throw new Error("empty listener name");var t=this["__on__"+e],i=this._eventHandlers[e];if(void 0!==t||void 0!==i){for(var n=arguments.length,o=new Array(n-1),r=0,a=1;a<n;)o[r++]=arguments[a++];var s=P.safeCall(this,o,function(t){log("event/signal "+e+" handler failed:",t,t.stack)});void 0!==t&&t.forEach(s),void 0!==i&&i.forEach(s)}},c.emitWithArgs=function(e,t){if(""===e)throw new Error("empty listener name");var i=this["__on__"+e],n=this._eventHandlers[e];if(void 0!==i||void 0!==n){var o=P.safeCall(this,t,function(t){log("event/signal "+e+" handler failed:",t,t.stack)});void 0!==i&&i.forEach(o),void 0!==n&&n.forEach(o)}},c.removeListener=function(t,e){if(t in this._eventHandlers&&null!=e&&""!==t){var i=this._eventHandlers[t],n=i.indexOf(e);0<=n?i.splice(n,1):$manifest$trace$listeners&&log("failed to remove listener for",t,"from",this),i.length||this.removeAllListeners(t)}else $manifest$trace$listeners&&log("invalid removeListener("+t+", "+e+") invocation",(new Error).stack)},c.on=function(t,e){if(""===t)throw new Error("empty listener name");var i=this._eventHandlers,n=i[t];void 0!==n?n.push(e):i[t]=[e]},c.connectOn=function(t,e,i){t.on(e,i),this._onConnections.push(t,e,i)},c.$c=function(t){e.$c.call(this,t.$b={})},c.$s=function(t){e.$s.call(this,t.$b),delete t.$b,this.completed()};var l=P.EventEmitter,h=l.prototype,p=P.Object=function(t,e){l.apply(this,arguments),this.parent=t,this.children=[],this.__properties={},this.__attachedObjects=[],t&&t.__attachedObjects.push(this);this._context=t?t._context:null;if(e){var i=this._local;i.model=e,i.modelData=e,i._delegate=this}this._changedConnections=[],this._properties={}},u=p.prototype=Object.create(h);u._propertyToStyle={width:"width",height:"height",x:"left",y:"top",viewX:"left",viewY:"top",opacity:"opacity",border:"border",radius:"border-radius",rotate:"transform",boxshadow:"box-shadow",transform:"transform",visible:"visibility",visibleInView:"visibility",background:"background",color:"color",backgroundImage:"background-image",font:"font"},u.constructor=p,u.componentName="core.Object",u.completed=function(){this.__complete!==P.CoreObject.prototype.__complete&&this._registerDelayedAction("complete")&&this._context.__onCompleted(this)},u.discard=function(){this.removeAllOnChanged();var t=this.__attachedObjects;this.__attachedObjects=[],t.forEach(function(t){t.discard()});var e=this.parent;if(e){var i=e.__attachedObjects.indexOf(this);0<=i&&e.__attachedObjects.splice(i,1)}this.children=[],this._local={};var n=this.__properties;for(var o in n)n[o].discard();this._properties={},P.EventEmitter.prototype.discard.apply(this)},u.removeAllOnChanged=function(){for(var t=this._changedConnections,e=0,i=t.length;e<i;e+=3)t[e].removeOnChanged(t[e+1],t[e+2]);this._changedConnections=[]},u.getComponentPath=function(){for(var t=[],e=this;e;){var i=e.componentName;if(e.parent){var n=e.parent.children.indexOf(e);0<=n&&(i+="@"+n)}t.unshift(i),e=e.parent}return t.join(" → ")};var f=function(){var t=this._get("context",!0);return(t=this._context).tr.apply(t,arguments)};u.tr=f,u.qsTr=f,u._tryFocus=function(){return!1},u.addChild=function(t){this.children.push(t)},u.removeChild=function(t){var e=this.children,i=e.indexOf(t);0<=i&&e.splice(i,1)},u.stopEvent=function(t){P.callMethod(t,"preventDefault"),P.callMethod(t,"stopImmediatePropagation")},u._getPropertyStorage=function(t){return this.__properties[t]},u._cancelDelayedAction=function(t){this._registeredDelayedActions[t]=!1},u._setId=function(t){for(var e=this;e;)e._local[t]=this,e=e.parent},u._registerDelayedAction=function(t){var e=this._registeredDelayedActions;return void 0===e&&(e=this._registeredDelayedActions={}),!0!==e[t]&&(e[t]=!0)},u.resetAnimation=function(t){var e=this.__properties[t];if(void 0!==e&&e.animation){var i=e.animation;i.disable();var n=i.target;i.target=n,e.animation=null,i.enable(),i.target=n}},u._removeUpdater=function(t){var e=this.__properties[t];void 0!==e&&e.removeUpdater()},u.getAnimation=function(t){var e=this.__properties[t];return e?e.animation:null},u.updateAnimation=function(t,e){this._context.backend.setAnimation(this,t,e)},u.setAnimation=function(t,e){this._get("context",!0);if(!$manifest$disableAnimations){if(null===e)return this.resetAnimation(t);var i=this._context.backend;if("contentX"!==t&&"contentY"!==t||log("WARNING: you're trying to animate contentX/contentY property, this will always use animation frames, ignoring CSS transitions, please use content.x/content.y instead"),e.target=this,e.property=t,this._createPropertyStorage(t).animation=e,i.setAnimation(this,t,e))e._native=!0;else{var n=this[t];n&&"object"==typeof n&&"_animateAll"in n&&n._animateAll(e)}}},u.removeOnChanged=function(t,e){var i,n=this.__properties[t];void 0!==n&&(i=n.removeOnChanged(e)),$manifest$trace$listeners&&!i&&log("failed to remove changed listener for",t,"from",this)},u._replaceUpdater=function(t,e,i){this._createPropertyStorage(t).replaceUpdater(this,e,i)},u.onChanged=function(t,e,i){var n=this._createPropertyStorage(t);n.onChanged.push(e),i||n.callOnChangedWithCurrentValue(this,t,e)},u._createPropertyStorage=function(t,e){var i=this.__properties[t];return void 0!==i?i:this.__properties[t]=new P.core.PropertyStorage(e)},u._setProperty=function(t,e,i){var n=this._createPropertyStorage(t,e),o=n.animation;void 0!==o&&o.disable(),n.setCurrentValue(this,t,e,i),void 0!==o&&o.enable()},u.connectOnChanged=function(t,e,i,n){if(!(t&&"onChanged"in t))return!1;(t.onChanged(e,i,!0),this._changedConnections.push(t,e,i),n)||t._createPropertyStorage(e).callOnChangedWithCurrentValue(t,e,i);return!0},u.$c=function(t){h.$c.call(this,t.$b={})},u.$s=function(t){h.$s.call(this,t.$b),delete t.$b,this.completed()};var g=P.Object,_=g.prototype,m=P.System=function(t,e){g.apply(this,arguments),this.vendor=P.vendor,this.device=P.device,this.os=P.os,this.browser=P.browser,this.userAgent=P.userAgent,this.language=P.language;var i=this._context;i.language=this.language.replace("-","_"),this.webkit=0<=this.userAgent.toLowerCase().indexOf("webkit"),this.support3dTransforms=i.backend.capabilities.csstransforms3d||!1,this.supportTransforms=i.backend.capabilities.csstransforms||!1,this.supportTransitions=i.backend.capabilities.csstransitions||!1,this.resolutionWidth=$manifest$resolutionWidth,this.resolutionHeight=$manifest$resolutionHeight},y=m.prototype=Object.create(_);y.constructor=m,y.componentName="core.System",s.addProperty(y,"string","userAgent"),s.addProperty(y,"string","language"),s.addProperty(y,"string","browser"),s.addProperty(y,"string","vendor"),s.addProperty(y,"string","os"),s.addProperty(y,"bool","webkit"),s.addProperty(y,"bool","support3dTransforms"),s.addProperty(y,"bool","supportTransforms"),s.addProperty(y,"bool","supportTransitions"),s.addProperty(y,"bool","portrait"),s.addProperty(y,"bool","landscape"),s.addProperty(y,"bool","pageActive",!0),s.addProperty(y,"int","screenWidth"),s.addProperty(y,"int","screenHeight"),s.addProperty(y,"int","contextWidth"),s.addProperty(y,"int","contextHeight"),s.addProperty(y,"int","resolutionWidth"),s.addProperty(y,"int","resolutionHeight"),s.addProperty(y,"bool","virtualKeyboard"),s.addProperty(y,"bool","tapHighlighted"),s.addProperty(y,"bool","selectByMouse"),y.Desktop=0,m.Desktop=0,y.Tv=1,m.Tv=1,y.Mobile=2,m.Mobile=2,s.addProperty(y,"enum","device"),y.MobileS=0,m.MobileS=0,y.MobileM=1,m.MobileM=1,y.MobileL=2,m.MobileL=2,y.Tablet=3,m.Tablet=3,y.Laptop=4,m.Laptop=4,y.LaptopL=5,m.LaptopL=5,y.Laptop4K=6,m.Laptop4K=6,s.addProperty(y,"enum","layoutType"),y._updateLayoutType=function(){if(this.contextWidth&&this.contextHeight){var t=this.contextWidth;t<=320?this.layoutType=this.MobileS:t<=375?this.layoutType=this.MobileM:t<=425?this.layoutType=this.MobileL:t<=768?this.layoutType=this.Tablet:this.contextWidth<=1024?this.layoutType=this.Laptop:this.contextWidth<=1440?this.layoutType=this.LaptopL:this.layoutType=this.Laptop4K}};f=function(t){this._updateLayoutType()};P._protoOnChanged(y,"contextWidth",f),P._protoOnChanged(y,"contextHeight",f),y.$c=function(t){_.$c.call(this,t.$b={})},y.$s=function(t){var e=this;_.$s.call(e,t.$b),delete t.$b;var i=x.core.System.prototype;e._replaceUpdater("portrait",function(){e.portrait=e.parent.width<e.parent.height},[e.parent,"width",e.parent,"height"]),e._replaceUpdater("landscape",function(){e.landscape=!e.portrait},[e,"portrait"]),e._replaceUpdater("contextWidth",function(){e.contextWidth=e._context.width},[e._context,"width"]),e._replaceUpdater("contextHeight",function(){e.contextHeight=e._context.height},[e._context,"height"]),e._replaceUpdater("virtualKeyboard",function(){e.virtualKeyboard=e.device===i.Tv||e.device===i.Mobile},[e,"device"]),e._replaceUpdater("tapHighlighted",function(){e.tapHighlighted="android"===e.os||"androidttk"===e.os||"hisense"===e.os||"ekt"===e.os||"sagem"===e.os},[e,"os"]),e._replaceUpdater("selectByMouse",function(){e.selectByMouse=!(e.tapHighlighted||"webos"===e.os)},[e,"tapHighlighted",e,"os"]),e.completed()};var v=P.Object,b=v.prototype,$=P.Item=function(t,e){if(v.apply(this,arguments),this._pressedHandlers={},this._topPadding=0,t){if(this.element)throw new Error("double ctor call");this._createElement(this.getTag(),this.getClass())}},w=$.prototype=Object.create(b);w.constructor=$,w.componentName="core.Item",w.newBoundingBox=P.createSignal("newBoundingBox"),w.anchorsMarginsUpdated=P.createSignal("anchorsMarginsUpdated"),s.addProperty(w,"int","x"),s.addProperty(w,"int","y"),s.addProperty(w,"int","z"),s.addProperty(w,"int","width"),s.addProperty(w,"int","height"),s.addProperty(w,"bool","clip"),s.addLazyProperty(w,"radius",function(t,e){var i,n={lazy$radius:i=new P.Radius(t,e)};return i.$c(n.$c$lazy$radius={}),(i=n.lazy$radius).$s(n.$c$lazy$radius),delete n.$c$lazy$radius,i.completed(),i}),s.addProperty(w,"bool","fullscreen"),s.addProperty(w,"bool","focus"),s.addProperty(w,"bool","focused"),s.addProperty(w,"bool","activeFocus"),s.addProperty(w,"Item","focusedChild"),s.addProperty(w,"bool","selectByMouse"),s.addProperty(w,"bool","visible",!0),s.addProperty(w,"bool","visibleInView",!0),s.addProperty(w,"bool","recursiveVisible",!1),s.addProperty(w,"real","opacity",1),s.addLazyProperty(w,"anchors",function(t,e){var i,n={lazy$anchors:i=new P.Anchors(t,e)};return i.$c(n.$c$lazy$anchors={}),(i=n.lazy$anchors).$s(n.$c$lazy$anchors),delete n.$c$lazy$anchors,i.completed(),i}),s.addLazyProperty(w,"effects",function(t,e){var i,n={lazy$effects:i=new P.Effects(t,e)};return i.$c(n.$c$lazy$effects={}),(i=n.lazy$effects).$s(n.$c$lazy$effects),delete n.$c$lazy$effects,i.completed(),i}),s.addLazyProperty(w,"transform",function(t,e){var i,n={lazy$transform:i=new P.Transform(t,e)};return i.$c(n.$c$lazy$transform={}),(i=n.lazy$transform).$s(n.$c$lazy$transform),delete n.$c$lazy$transform,i.completed(),i}),s.addProperty(w,"bool","cssTranslatePositioning"),s.addProperty(w,"bool","cssNullTranslate3D"),s.addProperty(w,"bool","cssDelegateAlwaysVisibleOnAcceleratedSurfaces",!0),s.addProperty(w,"bool","cssPointerTouchEvents",!1),s.addConstProperty(w,"left",function(){return[this,0]}),s.addConstProperty(w,"top",function(){return[this,1]}),s.addConstProperty(w,"right",function(){return[this,2]}),s.addConstProperty(w,"bottom",function(){return[this,3]}),s.addConstProperty(w,"horizontalCenter",function(){return[this,4]}),s.addConstProperty(w,"verticalCenter",function(){return[this,5]}),s.addProperty(w,"int","viewX"),s.addProperty(w,"int","viewY"),s.addProperty(w,"int","keyProcessDelay"),w.discard=function(){P.Object.prototype.discard.apply(this),this.focusedChild=null,this._pressedHandlers={},this.element&&this.element.discard()},w._tryFocus=function(){if(!this.visible)return!1;if(this.focusedChild&&this.focusedChild._tryFocus())return!0;for(var t=this.children,e=0;e<t.length;++e){var i=t[e];if(i._tryFocus())return this._focusChild(i),!0}return this.focus},w.setFocus=function(){this.forceActiveFocus()},w._updateOverflow=function(){this.style({overflow:this.clip?"hidden":"visible"})},w._updateStyle=function(){var t=this.element;t&&t.updateStyle()},w.toScreen=function(){for(var t=this,e=0,i=0,n=this.width+(this._borderWidthAdjust||0)+(this._borderInnerWidthAdjust||0),o=this.height+(this._borderHeightAdjust||0)+(this._borderInnerHeightAdjust||0);t;){if(e+=t.x+t.viewX+(t._borderXAdjust||0),i+=t.y+t.viewY+(t._borderYAdjust||0),t.hasOwnProperty("view")){var r=t.view.content;e+=r.x,i+=r.y}t=t.parent}return[e,i,e+n,i+o,e+n/2,i+o/2]},w.hasActiveFocus=function(){for(var t=this;t.parent;){if(t.parent.focusedChild!=t)return!1;t=t.parent}return!0},w.forceActiveFocus=function(){for(var t=this;t.parent;)t.parent._focusChild(t),t=t.parent;this._tryFocus()&&this._propagateFocusToParents()},w._propagateFocusToParents=function(){for(var t=this;t.parent&&(!t.parent.focusedChild||!t.parent.focusedChild.visible);)t.parent._focusChild(t),t=t.parent},w._updateVisibility=function(){var t=this.visible&&this.visibleInView,e=!0,i=this.view;if(void 0!==i){var n=i.content;n.cssDelegateAlwaysVisibleOnAcceleratedSurfaces&&(n.cssTranslatePositioning||n.cssNullTranslate3D)&&!$manifest$cssDisableTransformations&&(e=!1)}e&&this.style("visibility",t?"inherit":"hidden"),this.recursiveVisible=t&&(null===this.parent||this.parent.recursiveVisible)},w._setSizeAdjust=function(){var t=this.x+this.viewX+(this._borderXAdjust||0),e=this.y+this.viewY+(this._borderYAdjust||0);this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?(this.transform.translateX=t,this.transform.translateY=e):(this.style("left",t),this.style("top",e)),this.newBoundingBox()},w.getClass=function(){return""},w.getTag=function(){return"div"},w._focusTree=function(t){this.activeFocus=t,this.focusedChild&&this.focusedChild._focusTree(t)},w.addChild=function(t){P.Object.prototype.addChild.apply(this,arguments),t._tryFocus()&&t._propagateFocusToParents()},w._focusChild=function(t){if(t.parent!==this)throw new Error("invalid object passed as child");this.focusedChild!==t&&(this.focusedChild&&(this.focusedChild._focusTree(!1),this.focusedChild.focused=!1),this.focusedChild=t,this.focusedChild&&(this.focusedChild._focusTree(this.hasActiveFocus()),this.focusedChild.focused=!0))},w.focusChild=function(t){this._propagateFocusToParents(),this._focusChild(t)},w._updateVisibilityForChild=function(t,e){t.recursiveVisible=e&&t.visible&&t.visibleInView},w._attachElement=function(t){this.element&&this.element.discard(),this.element=t;var e=this.parent;e&&e.element.append(t)},w._processKey=function(e,t){$manifest$trace$keys&&log(this.getComponentPath(),"_processKey",e,t);var i=t.timeStamp;if(this.keyProcessDelay){if(this._lastEvent&&i>this._lastEvent&&i-this._lastEvent<this.keyProcessDelay)return!0;this._lastEvent=i}var n=P.safeCall(this,[e,t],function(t){log("on "+e+" handler failed:",t,t.stack)}),o=this["__key__"+e];if(e in this._pressedHandlers&&this.invokeKeyHandlers(e,t,this._pressedHandlers[e],n))return!0;if(o&&this.invokeKeyHandlers(e,t,o,n))return!0;o=this.__key__Key;return!!("Key"in this._pressedHandlers&&this.invokeKeyHandlers(e,t,this._pressedHandlers.Key,n))||!(!o||!this.invokeKeyHandlers(e,t,o,n))},w.invokeKeyHandlers=function(t,e,i,n){for(var o=i.length-1;0<=o;--o){if(n(i[o]))return $manifest$trace$keys&&log("key "+t+" handled in "+(performance.now()-e.timeStamp).toFixed(3)+" ms by",this,(new Error).stack),!0}return!1},w.onPressed=function(t,i){var e;this._get("key",!0);e="Key"!=t?function(t,e){return e.accepted=!0,i(t,e),e.accepted}:i,t in this._pressedHandlers?this._pressedHandlers[t].push(e):this._pressedHandlers[t]=[e]},w.style=function(t,e){var i=this.element;if(i)return i.style(t,e);log("WARNING: style skipped:",t,e)},w._enqueueNextChildInFocusChain=function(t,e){this._tryFocus();var i=this.focusedChild;i&&i.visible&&(t.unshift(i),e.unshift(i))},w.registerStyle=function(t,e){var i="position: absolute; visibility: inherit; opacity: 1.0;";i+="border-style: solid; border-width: 0px; border-radius: 0px; box-sizing: border-box; border-color: rgba(0,0,0,1);",i+="white-space: nowrap; transform: none;",i+="left: 0px; top: 0px; width: 0px; height: 0px;",i+="font-family: "+$manifest$style$font$family+"; ",i+="line-height: "+$manifest$style$font$lineHeight+"; ",i+="font-weight: "+$manifest$style$font$weight+"; ",i+="pointer-events: inherit; touch-action: inherit; ",$manifest$style$font$pixelSize?i+="font-size: "+$manifest$style$font$pixelSize+"px; ":$manifest$style$font$pointSize&&(i+="font-size: "+$manifest$style$font$pointSize+"pt; "),t.addRule(e,i)},w._createElement=function(t,e){var i=this._get("context",!0);null===(i=this._context)&&(i=this),i.registerStyle(this,t,e),this._attachElement(i.createElement(t,e))},P._protoOnChanged(w,"cssNullTranslate3D",function(t){$manifest$cssDisableTransformations||this.style("transform",t?"translateZ(0)":"")}),P._protoOnChanged(w,"focus",function(t){this.parent&&this.parent._tryFocus()}),P._protoOnChanged(w,"height",function(t){this.style("height",t-this._topPadding+(this._borderHeightAdjust||0)),this.newBoundingBox()}),P._protoOnChanged(w,"selectByMouse",function(t){this.style("user-select",t?"":"none")}),P._protoOnChanged(w,"width",function(t){this.style("width",t+(this._borderWidthAdjust||0)),this.newBoundingBox()}),P._protoOnChanged(w,"fullscreen",function(t){var e=this._context.backend;"enterFullscreenMode"in e?t?e.enterFullscreenMode(this.element):e.exitFullscreenMode():log("enterFullscreenMode is not available in current backend, fullscreen: "+t)}),P._protoOnChanged(w,"recursiveVisible",function(t){for(var e=this.__attachedObjects,i=0,n=e.length;i<n;++i){var o=e[i];this._updateVisibilityForChild(o,t)}!t&&this.parent&&this.parent._tryFocus(),$manifest$requireExplicitRecursiveVisibilityStyle&&this.style("-pure-recursive-visibility",t)}),P._protoOnChanged(w,"cssPointerTouchEvents",function(t){var e=t?"auto":"none";this.style("pointer-events",e),this.style("touch-action",e)});f=function(t){var e=this.x+this.viewX;this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?this.transform.translateX=e:this.style("left",e),this.newBoundingBox()};P._protoOnChanged(w,"x",f),P._protoOnChanged(w,"viewX",f);var C=function(t){var e=this.y+this.viewY;this.cssTranslatePositioning&&!$manifest$cssDisableTransformations?this.transform.translateY=e:this.style("top",e),this.newBoundingBox()};P._protoOnChanged(w,"y",C),P._protoOnChanged(w,"viewY",C),P._protoOnChanged(w,"opacity",function(t){this.element&&this.style("opacity",t)}),P._protoOnChanged(w,"clip",function(t){this._updateOverflow()});var k=function(t){this._updateVisibility()};P._protoOnChanged(w,"visible",k),P._protoOnChanged(w,"visibleInView",k),P._protoOnChanged(w,"z",function(t){this.style("z-index",t)}),w.$c=function(t){b.$c.call(this,t.$b={})},w.$s=function(t){var e=this;b.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("selectByMouse",function(){e.selectByMouse=e._context.system.selectByMouse},[e._context.system,"selectByMouse"]),e.completed()};var O=P.Item,A=O.prototype,S=P.BaseLayout=function(t,e){O.apply(this,arguments),this._skipPositioning=!1,this._padding={}},T=S.prototype=Object.create(A);T.constructor=S,T.componentName="core.BaseLayout",s.addProperty(T,"int","count"),s.addProperty(T,"bool","trace"),s.addProperty(T,"int","spacing"),s.addProperty(T,"int","currentIndex"),s.addProperty(T,"int","contentWidth"),s.addProperty(T,"int","contentHeight"),s.addProperty(T,"bool","keyNavigationWraps"),s.addProperty(T,"bool","handleNavigationKeys"),s.addProperty(T,"int","layoutDelay"),s.addProperty(T,"int","prerenderDelay"),s.addProperty(T,"bool","offlineLayout"),s.addLazyProperty(T,"padding",function(t,e){var i,n={lazy$padding:i=new P.BaseLayoutContentPadding(t,e)};return i.$c(n.$c$lazy$padding={}),(i=n.lazy$padding).$s(n.$c$lazy$padding),delete n.$c$lazy$padding,i.completed(),i}),T._doLayout=function(){this._attach(),this._processUpdates(),this._layout(),this._skipPositioning=!1},T._doLayoutNP=function(){this._attach(),this._processUpdates(),this._layout(!0),this._skipPositioning=!1};f=function(){};T._attach=f,T._processUpdates=f,T.__complete=function(){A.__complete.call(this),this._scheduleLayout()},T._scheduleLayout=function(t){(this.recursiveVisible||this.offlineLayout)&&(t&&(this._skipPositioning=!0),0<=this.prerenderDelay&&0<=this.layoutDelay&&this.layoutDelay<this.prerenderDelay?(this._context.delayedAction("layout",this,this._doLayoutNP,this.layoutDelay),this._context.delayedAction("prerender",this,this._doLayout,this.prerenderDelay)):this._context.delayedAction("layout",this,this._doLayout,this.layoutDelay))};C=function(t){this._scheduleLayout()};P._protoOnChanged(T,"spacing",C),P._protoOnChanged(T,"recursiveVisible",C),T.$c=function(t){A.$c.call(this,t.$b={})},T.$s=function(t){var e=this;A.$s.call(e,t.$b),delete t.$b,e._removeUpdater("layoutDelay"),e.layoutDelay=-1,e._removeUpdater("prerenderDelay"),e.prerenderDelay=-1,e.completed()};var z=P.BaseLayout,I=z.prototype,E=P.Layout=function(t,e){z.apply(this,arguments)},U=E.prototype=Object.create(I);U.constructor=E,U.componentName="core.Layout",U.focusNextChild=function(){var t=0,e=this.children;this.focusedChild&&(t=e.indexOf(this.focusedChild));for(var i=t+1;i<e.length;++i)if(e[i]._tryFocus())return this.currentIndex=i,this.focusChild(this.children[i]),!0;if(!this.keyNavigationWraps)return!1;for(i=0;i<=t;++i)if(e[i]._tryFocus())return this.currentIndex=i,this.focusChild(this.children[i]),!0;return!1},U.focusPrevChild=function(){var t=0,e=this.children;this.focusedChild&&(t=e.indexOf(this.focusedChild));for(var i=t-1;0<=i;--i)if(e[i]._tryFocus())return this.currentIndex=i,this.focusChild(this.children[i]),!0;if(!this.keyNavigationWraps)return!1;for(i=e.length-1;t<=i;--i)if(e[i]._tryFocus())return this.currentIndex=i,this.focusChild(this.children[i]),!0;return!1},P._protoOnChanged(U,"currentIndex",function(t){0<=t&&t<this.children.length&&this.focusChild(this.children[t])}),U.$c=function(t){I.$c.call(this,t.$b={})},U.$s=function(t){var e=this;I.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.contentWidth},[e,"contentWidth"]),e._replaceUpdater("height",function(){e.height=e.contentHeight},[e,"contentHeight"]),e._removeUpdater("handleNavigationKeys"),e.handleNavigationKeys=!0,e._removeUpdater("keyNavigationWraps"),e.keyNavigationWraps=!0,e.completed()};var L=P.Layout,M=L.prototype,H=P.Column=function(t,e){L.apply(this,arguments)},j=H.prototype=Object.create(M);j.constructor=H,j.componentName="core.Column",j._layout=function(){if(this.recursiveVisible||this.offlineLayout){var t=this.children,e=0,i=0;this.count=t.length;for(var n=0;n<t.length;++n){var o=t[n];if("height"in o){var r=o.anchors.topMargin||o.anchors.margins,a=o.anchors.bottomMargin||o.anchors.margins,s=o.x+o.width;i<s&&(i=s),o.viewY=e+r,o.recursiveVisible&&(e+=o.height+r+a+this.spacing)}}0<e&&(e-=this.spacing),this.contentWidth=i,this.contentHeight=e}},j.addChild=function(t){if(P.Item.prototype.addChild.apply(this,arguments),"height"in t){var e=this._scheduleLayout.bind(this);t.onChanged("height",e),t.onChanged("recursiveVisible",e),t.on("anchorsMarginsUpdated",e),this._scheduleLayout()}},P._protoOnKey(j,"Key",function(t,e){if(!this.handleNavigationKeys)return!1;switch(t){case"Up":return this.focusPrevChild();case"Down":return this.focusNextChild()}}),j.$c=function(t){M.$c.call(this,t.$b={})},j.$s=function(t){M.$s.call(this,t.$b),delete t.$b,this.completed()};var R=P.Object,B=R.prototype,N=P.Shadow=function(t,e){R.apply(this,arguments)},D=N.prototype=Object.create(B);D.constructor=N,D.componentName="core.Shadow",s.addProperty(D,"real","x"),s.addProperty(D,"real","y"),s.addProperty(D,"color","color","black"),s.addProperty(D,"real","blur"),s.addProperty(D,"real","spread"),D._empty=function(){return!(this.x||this.y||this.blur||this.spread)},D._getFilterStyle=function(){var t=this.x+"px "+this.y+"px "+this.blur+"px ";return 0<this.spread&&(t+=this.spread+"px "),t+=P.Color.normalize(this.color)};f=function(t){this.parent._updateStyle(!0)};P._protoOnChanged(D,"x",f),P._protoOnChanged(D,"y",f),P._protoOnChanged(D,"color",f),P._protoOnChanged(D,"blur",f),P._protoOnChanged(D,"spread",f),D.$c=function(t){B.$c.call(this,t.$b={})},D.$s=function(t){B.$s.call(this,t.$b),delete t.$b,this.completed()};var F=P.BaseLayout,W=F.prototype,V=P.BaseView=function(t,e){F.apply(this,arguments),this._items=[],this._modelUpdate=new P.model.ModelUpdate,this.__moveDir=0},Y=V.prototype=Object.create(W);Y.constructor=V,Y.componentName="core.BaseView",Y.layoutFinished=P.createSignal("layoutFinished"),Y.scrollEvent=P.createSignal("scrollEvent"),Y.modelUpdated=P.createSignal("modelUpdated"),s.addProperty(Y,"Item","highlight"),s.addProperty(Y,"Object","model"),s.addProperty(Y,"Item","delegate"),s.addProperty(Y,"int","contentX"),s.addProperty(Y,"int","contentY"),s.addProperty(Y,"int","scrollingStep",0),s.addProperty(Y,"int","animationDuration",0),s.addProperty(Y,"string","animationEasing","ease"),s.addProperty(Y,"bool","contentFollowsCurrentItem"),s.addProperty(Y,"bool","nativeScrolling"),s.addProperty(Y,"real","prerender",.5),s.addProperty(Y,"string","visibilityProperty"),s.addProperty(Y,"BaseViewContent","content"),s.addProperty(Y,"ContentMargin","contentMargin"),Y.Contain=0,V.Contain=0,Y.Center=1,V.Center=1,Y.Visible=2,V.Visible=2,Y.Page=3,V.Page=3,Y.End=4,V.End=4,s.addProperty(Y,"enum","positionMode"),Y.discard=function(){this._detach(),P.BaseLayout.prototype.discard.apply(this)},Y._updateHighlightForCurrentItem=function(){this._updateHighlight(this.itemAtIndex(this.currentIndex))},Y.positionViewAtEndVertically=function(){var t=this.height,e=this.contentMargin.bottom,i=this.contentMargin.top,n=this.contentHeight+e-t;-i<n&&(this.contentY=n)},Y.focusCurrent=function(){var t=this.count;if(0!==t){var e=this.currentIndex;if(e<0||t<=e)this.keyNavigationWraps?this.currentIndex=(e+t)%t:this.currentIndex=e<0?0:t-1;else{var i=this.itemAtIndex(e);i&&this.focusChild(i),this.contentFollowsCurrentItem&&!this._skipPositioning&&this.positionViewAtIndex(e),this._updateHighlight(i)}}},Y._processUpdates=function(){var t=this._modelUpdate.apply(this);qml.core.BaseLayout.prototype._processUpdates.apply(this),this.count=this._items.length,t&&this.modelUpdated()},Y.positionViewAtEndHorizontally=function(){var t=this.width,e=this.contentMargin.right,i=this.contentMargin.left,n=this.contentWidth+e-t;-i<n&&(this.contentX=n)},Y._attach=function(){this._get("model",!0);!this._modelAttached&&this.model&&this.delegate&&(this.trace&&log("attaching model..."),this.model.attachTo(this))},Y._detach=function(){var t=this._get("model",!0);(t=this._modelAttached)&&(this.trace&&log("detaching model..."),t.detachFrom(this))},Y._onReset=function(){var t=this._get("model",!0);t=this._modelAttached;this.trace&&log("reset",this._items.length,t.count),this._modelUpdate.reset(t),this._scheduleLayout()},Y.__complete=function(){W.__complete.call(this);var i=this;this.element.on("scroll",function(){var t=i.element.getScrollX(),e=i.element.getScrollY();i._updateScrollPositions(t,e),i.scrollEvent(t,e)}.bind(this))},Y._updateItems=function(t,e){for(var i=t;i<e;++i)this._updateDelegate(i)},Y._onRowsChanged=function(t,e){this.trace&&log("rows changed",t,e),this._modelUpdate.update(this._modelAttached,t,e),this._scheduleLayout()},Y._onRowsInserted=function(t,e){this.trace&&log("rows inserted",t,e),this._modelUpdate.insert(this._modelAttached,t,e),this._scheduleLayout()},Y._onRowsRemoved=function(t,e){this.trace&&log("rows removed",t,e),this._modelUpdate.remove(this._modelAttached,t,e),this._scheduleLayout()},Y._removeItems=function(t,e){var i=this._items.splice(t,e-t),n=this;i.forEach(function(t){n._discardItem(t)})},Y._insertItems=function(t,e){var i=e-t+2,n=new Array(i);n[0]=t,n[1]=0;for(var o=2;o<i;++o)n[o]=null;Array.prototype.splice.apply(this._items,n)},Y.moveCurrentIndex=function(t){var e=this.currentIndex,i=this.keyNavigationWraps,n=this.count,o=!1;return e+=this.__moveDir=t,i?(e%=n)<0&&(e+=n):(e<0&&(o=!(e=0)),n<=e&&(e=n-1,o=!0)),!(o||e<0||n<=e)&&(this.currentIndex=e,!0)},Y._updateDelegateIndex=function(t){var e=this._items[t];e&&(e._local.model.index=t,e._createPropertyStorage("_rowIndex").callOnChanged(e,"_rowIndex"))},Y._updateDelegate=function(t){var e=this._items[t];if(e){var i=this._modelAttached.get(t);i.index=t,e._local.model=i,e._createPropertyStorage("_row").callOnChanged(e,"_row",i,{})}},Y.itemAtIndex=function(t){var e=this._items[t];return e||null},Y._createDelegate=function(t,e){var i=this._items,n=i[t];if(null!=n)return n;var o=this.visibilityProperty,r=this._modelAttached.get(t);return o&&!r[o]?null:(this.trace&&log("createDelegate",t,r),r.index=t,n=this.delegate(this,r),(i[t]=n).view=this,n.element.remove(),void 0===e?this.content.element.append(n.element):e.call(this,n),n.recursiveVisible=this.recursiveVisible&&n.visible&&n.visibleInView,n)},Y._discardItem=function(t){null!==t&&(this.focusedChild===t&&(this.focusedChild=null),t.discard())},Y._updateHighlight=function(t){var e=this.highlight;e&&t&&(e.viewX=t.viewX,e.viewY=t.viewY,e.width=t.width,e.height=t.height,e.newBoundingBox())},Y.positionViewAtItemHorizontally=function(t,e,i){var n=this.contentX,o=t[0],r=t[2],a=this.width,s=this.contentMargin.right,c=this.contentMargin.left,l=o-a/2+r/2;a<r?this.contentX=i?l:o:e&&this.contentWidth>a?this.contentX=l<-c?-c:o>this.contentWidth-a/2-r/2+s?this.contentWidth-a+s:l:o<=c?this.contentX=-c:o-n<=0?this.contentX=o:a<o-n+r&&(this.contentX=o+r-a+s)},Y.positionViewAtItemVertically=function(t,e,i){var n=this.contentY,o=t[1],r=t[3],a=this.height,s=this.contentMargin.top,c=this.contentMargin.bottom,l=o-a/2+r/2;a<r?this.contentY=i?l:o:e&&this.contentHeight>a?this.contentY=l<-s?-s:o>this.contentHeight-a/2-r/2+c?this.contentHeight-a+c:l:o<=s?this.contentY=-s:o-n<=0?this.contentY=o:a<o-n+r+c&&(this.contentY=o+r-a+c)},Y.itemAt=function(t,e){var i=this.indexAt(t,e);return 0<=i?this._items[i]:null},Y._updateScrollPositions=function(t,e,i){this._setProperty("contentX",t),this._setProperty("contentY",e),this.content._updateScrollPositions(t,e,i)},P._protoOnChanged(Y,"contentX",function(t){this.nativeScrolling?this.element.setScrollX(t):this.content.x=-t}),P._protoOnChanged(Y,"contentY",function(t){this.nativeScrolling?this.element.setScrollY(t):this.content.y=-t}),P._protoOnChanged(Y,"recursiveVisible",function(t){t&&this._scheduleLayout()}),P._protoOnChanged(Y,"delegate",function(t){t&&(t.visible=!1)}),P._protoOnChanged(Y,"currentIndex",function(t){this.focusCurrent()}),P._protoOnChanged(Y,"highlight",function(t){var e=t;e&&(e.view=this,e.element.remove(),this.content.element.prepend(e.element))}),P._protoOnChanged(Y,"focusedChild",function(t){var e=this._items.indexOf(this.focusedChild);0<=e&&(this.currentIndex=e)}),P._protoOnChanged(Y,"model",function(t){this._get("model",!0);this.trace&&log("model changed to ",t),this._detach(),this._modelUpdate.clear(),this._removeItems(0,this.count),this.count=0,this._scheduleLayout()});f=function(t){this._scheduleLayout()};P._protoOnChanged(Y,"width",f),P._protoOnChanged(Y,"height",f),P._protoOn(Y,"layoutFinished",function(){this.focusCurrent(),this._updateHighlightForCurrentItem()}),Y.$c=function(t){W.$c.call(this,t.$b={});var e=new P.BaseViewContent(this);(t._this$content=e).$c(t.$c$_this$content={}),this.content=e;var i=new P.ContentMargin(this);(t._this$contentMargin=i).$c(t.$c$_this$contentMargin={}),this.contentMargin=i},Y.$s=function(t){var e=this;W.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("contentFollowsCurrentItem",function(){e.contentFollowsCurrentItem=!e.nativeScrolling},[e,"nativeScrolling"]),e._replaceUpdater("nativeScrolling",function(){e.nativeScrolling=e._context.system.device===e._context.system.Mobile},[e._context.system,"device",e._context.system,"Mobile"]),e._removeUpdater("contentWidth"),e.contentWidth=1,e._removeUpdater("contentHeight"),e.contentHeight=1,e._removeUpdater("keyNavigationWraps"),e.keyNavigationWraps=!0,e._removeUpdater("handleNavigationKeys"),e.handleNavigationKeys=!0,e._replaceUpdater("cssPointerTouchEvents",function(){e.cssPointerTouchEvents=e.nativeScrolling},[e,"nativeScrolling"]);var i=t._this$content;i.$s(t.$c$_this$content),delete t.$c$_this$content,i._replaceUpdater("cssTranslatePositioning",function(){i.cssTranslatePositioning=i.parent.cssTranslatePositioning},[i.parent,"cssTranslatePositioning"]),i._replaceUpdater("cssPointerTouchEvents",function(){i.cssPointerTouchEvents=i.parent.cssPointerTouchEvents},[i.parent,"cssPointerTouchEvents"]);var n,o={behavior__this_content_on_x:n=new P.Animation(i)};n.$c(o.$c$behavior__this_content_on_x={}),(n=o.behavior__this_content_on_x).$s(o.$c$behavior__this_content_on_x),delete o.$c$behavior__this_content_on_x,n._replaceUpdater("duration",function(){n.duration=n.parent.parent.nativeScrolling?0:n.parent.parent.animationDuration},[n.parent.parent,"nativeScrolling",n.parent.parent,"animationDuration"]),n._replaceUpdater("easing",function(){n.easing=n.parent.parent.animationEasing},[n.parent.parent,"animationEasing"]),n.completed(),i.setAnimation("x",n);var r,a={behavior__this_content_on_y:r=new P.Animation(i)};r.$c(a.$c$behavior__this_content_on_y={}),(r=a.behavior__this_content_on_y).$s(a.$c$behavior__this_content_on_y),delete a.$c$behavior__this_content_on_y,r._replaceUpdater("duration",function(){r.duration=r.parent.parent.nativeScrolling?0:r.parent.parent.animationDuration},[r.parent.parent,"nativeScrolling",r.parent.parent,"animationDuration"]),r._replaceUpdater("easing",function(){r.easing=r.parent.parent.animationEasing},[r.parent.parent,"animationEasing"]),r.completed(),i.setAnimation("y",r);var s,c={behavior__this_content_on_transform:s=new P.Animation(i)};s.$c(c.$c$behavior__this_content_on_transform={}),(s=c.behavior__this_content_on_transform).$s(c.$c$behavior__this_content_on_transform),delete c.$c$behavior__this_content_on_transform,s._replaceUpdater("duration",function(){s.duration=s.parent.parent.nativeScrolling?0:s.parent.parent.animationDuration},[s.parent.parent,"nativeScrolling",s.parent.parent,"animationDuration"]),s._replaceUpdater("easing",function(){s.easing=s.parent.parent.animationEasing},[s.parent.parent,"animationEasing"]),s.completed(),i.setAnimation("transform",s),i.completed();var l=t._this$contentMargin;l.$s(t.$c$_this$contentMargin),delete t.$c$_this$contentMargin,l.completed(),e.completed()};var X=P.BaseView,q=X.prototype,K=P.Repeater=function(t,e){X.apply(this,arguments)},G=K.prototype=Object.create(q);G.constructor=K,G.componentName="core.Repeater",G._layout=function(){var t=this._get("model",!0);if(this.recursiveVisible||this.offlineLayout)if(t=this._modelAttached){for(var e=!1,i=this.count=t.count,n=this._items,o=0;o<i;++o){var r=n[o];r||(r=this._createDelegate(o),e=!0)}this.layoutFinished(),e&&this._context.scheduleComplete()}else this.layoutFinished();else this.layoutFinished()},G.positionViewAtIndex=function(){},G._createDelegate=function(t){return P.BaseView.prototype._createDelegate.call(this,t,function(t){var e=this.parent;e.element.append(t.element),e.addChild(t)}.bind(this))},G._discardItem=function(t){this.parent.removeChild(t),P.BaseView.prototype._discardItem.apply(this,arguments)},P._protoOn(G,"layoutFinished",function(){var t=this.parent;t&&t._scheduleLayout&&t._scheduleLayout()}),G.$c=function(t){q.$c.call(this,t.$b={})},G.$s=function(t){q.$s.call(this,t.$b),delete t.$b,this.completed()};var Z=P.Object,J=Z.prototype,Q=P.BaseMixin=function(t,e){Z.apply(this,arguments),this.element=this.parent.element},tt=Q.prototype=Object.create(J);tt.constructor=Q,tt.componentName="core.BaseMixin",s.addProperty(tt,"bool","enabled",!0),tt.$c=function(t){J.$c.call(this,t.$b={})},tt.$s=function(t){J.$s.call(this,t.$b),delete t.$b,this.completed()};var et=P.BaseMixin,it=et.prototype,nt=P.BaseMouseMixin=function(t,e){et.apply(this,arguments),this._touchEvent=!1,this.cursor&&this.parent.style("cursor",this.cursor)},ot=nt.prototype=Object.create(it);ot.constructor=nt,ot.componentName="core.BaseMouseMixin",s.addProperty(ot,"string","cursor"),ot._trueUnlessTouchEvent=function(){return!this._touchEvent},ot._resetTouchEvent=function(){this._touchEvent=!1},ot._setTouchEvent=function(){this._touchEvent=!0},P._protoOnChanged(ot,"cursor",function(t){this._get("cursor",!0);this.parent.style("cursor",t)}),ot.$c=function(t){it.$c.call(this,t.$b={})},ot.$s=function(t){it.$s.call(this,t.$b),delete t.$b,this.completed()};var rt=P.BaseMouseMixin,at=rt.prototype,st=P.HoverMixin=function(t,e){rt.apply(this,arguments),this.element=this.parent.element,this.parent.style("cursor",this.cursor),this._bindHover(this.enabled),i.hasProperty(t,"hovered")||i.addProperty(t,"bool","hovered",!1)},ct=st.prototype=Object.create(at);ct.constructor=st,ct.componentName="core.HoverMixin",s.addProperty(ct,"bool","value"),ct._bindHover=function(t){t&&!this._hmHoverBinder&&(this._hmHoverBinder=new P.EventBinder(this.parent.element),this._context.backend.capabilities.mouseEnterLeaveSupported?(this._hmHoverBinder.on("mouseenter",function(){this.value=this._trueUnlessTouchEvent()}.bind(this)),this._hmHoverBinder.on("mouseleave",function(){this.value=!1}.bind(this))):(this._hmHoverBinder.on("mouseover",function(){this.value=this._trueUnlessTouchEvent()}.bind(this)),this._hmHoverBinder.on("mouseout",function(){this.value=!1}.bind(this))),this._hmHoverBinder.on("touchstart",this._setTouchEvent.bind(this)),this._hmHoverBinder.on("mouseup",this._resetTouchEvent.bind(this))),this._hmHoverBinder&&this._hmHoverBinder.enable(t)},P._protoOnChanged(ct,"enabled",function(t){this._bindHover(t)}),P._protoOnChanged(ct,"value",function(t){this.parent.hovered=t}),ct.$c=function(t){at.$c.call(this,t.$b={})},ct.$s=function(t){at.$s.call(this,t.$b),delete t.$b,this.completed()};var lt=P.HoverMixin,dt=lt.prototype,ht=r.FocusOnHoverMixin=function(t,e){lt.apply(this,arguments)},pt=ht.prototype=Object.create(dt);pt.constructor=ht,pt.componentName="controls.mixins.FocusOnHoverMixin",P._protoOnChanged(pt,"value",function(t){t&&this.parent.setFocus()}),pt.$c=function(t){dt.$c.call(this,t.$b={})},pt.$s=function(t){dt.$s.call(this,t.$b),delete t.$b,this._removeUpdater("cursor"),this.cursor="pointer",this.completed()};var ut=P.Item,ft=ut.prototype,gt=P.Rectangle=function(t,e){ut.apply(this,arguments),this._context.backend.initRectangle(this)},_t=gt.prototype=Object.create(ft);(_t._propertyToStyle=Object.create(ft._propertyToStyle)).color="background-color",_t.constructor=gt,_t.componentName="core.Rectangle",s.addProperty(_t,"color","color","#0000"),s.addLazyProperty(_t,"border",function(t,e){var i,n={lazy$border:i=new P.Border(t,e)};return i.$c(n.$c$lazy$border={}),(i=n.lazy$border).$s(n.$c$lazy$border),delete n.$c$lazy$border,i.completed(),i}),s.addProperty(_t,"Gradient","gradient"),P._protoOnChanged(_t,"color",function(t){this.style("background-color",P.Color.normalize(t))}),_t.$c=function(t){ft.$c.call(this,t.$b={})},_t.$s=function(t){ft.$s.call(this,t.$b),delete t.$b,this.completed()};var mt=P.Rectangle,yt=mt.prototype,vt=d.GameOver=function(t,e){mt.apply(this,arguments)},bt=vt.prototype=Object.create(yt);bt.constructor=vt,bt.componentName="src.GameOver",bt.restart=P.createSignal("restart"),s.addProperty(bt,"bool","playerWin"),s.addProperty(bt,"bool","tie"),bt.hide=function(){this.visible=!1},bt.showDialog=function(){var t=this._get("restartButton",!0);this.visible=!0,t.setFocus()},bt.$c=function(t){yt.$c.call(this,t.$b={});var e=new P.Text(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("gameOverText"),this.addChild(e);var i=new d.TextButton(this);(t._this$child1=i).$c(t.$c$_this$child1={}),i._setId("restartButton"),this.addChild(i)},bt.$s=function(t){var e=this;yt.$s.call(e,t.$b),delete t.$b,e.anchors._removeUpdater("fill"),e.anchors.fill=e.parent,e._removeUpdater("visible"),e.visible=!1,e._removeUpdater("color"),e.color="#000c",e._removeUpdater("z"),e.z=100500;var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._replaceUpdater("y",function(){i.y=250*i._context.virtualScale},[i._context,"virtualScale"]),i.anchors._replaceUpdater("horizontalCenter",function(){i.anchors.horizontalCenter=i.parent.horizontalCenter},[i.parent,"horizontalCenter"]),i._replaceUpdater("text",function(){i.text=i.parent.tie?"TIE":i.parent.playerWin?"YOU WIN":"YOU LOOSE"},[i.parent,"tie",i.parent,"playerWin"]),i._replaceUpdater("color",function(){i.color=i.parent.tie?"#FFEB3B":i.parent.playerWin?"#43A047":"#E53935"},[i.parent,"tie",i.parent,"playerWin"]),i.font._replaceUpdater("pixelSize",function(){i.font.pixelSize=64*i._context.virtualScale},[i._context,"virtualScale"]),i.completed();var n=t._this$child1;n.$s(t.$c$_this$child1),delete t.$c$_this$child1,n.anchors._replaceUpdater("top",function(){n.anchors.top=n._get("gameOverText").bottom},[n._get("gameOverText"),"bottom"]),n.anchors._replaceUpdater("horizontalCenter",function(){n.anchors.horizontalCenter=n.parent.horizontalCenter},[n.parent,"horizontalCenter"]),n.anchors._replaceUpdater("topMargin",function(){n.anchors.topMargin=50*n._context.virtualScale},[n._context,"virtualScale"]),n._removeUpdater("text"),n.text="RESTART",n.on("pressed",function(){this.parent.restart()}.bind(n)),n.completed(),e.completed()};var $t=P.Object,wt=$t.prototype,Ct=P.Animation=function(t,e){$t.apply(this,arguments),this._disabled=0,this._native=!1},xt=Ct.prototype=Object.create(wt);xt.constructor=Ct,xt.componentName="core.Animation",s.addProperty(xt,"int","delay",0),s.addProperty(xt,"int","duration",200),s.addProperty(xt,"bool","cssTransition",!0),s.addProperty(xt,"bool","running",!1),s.addProperty(xt,"string","easing","ease"),s.addProperty(xt,"Object","target"),s.addProperty(xt,"string","property"),s.addProperty(xt,"variant","from"),s.addProperty(xt,"variant","to"),xt._updateAnimation=function(){this.target&&this.target.updateAnimation(this.property,this)},xt.active=function(){return this.enabled()&&0<this.duration},xt.complete=function(){},xt.disable=function(){++this._disabled,this._updateAnimation()},xt.enable=function(){--this._disabled,this._updateAnimation()},xt.enabled=function(){return 0===this._disabled},xt.interpolate=function(t,e,i){return i*(t-e)+e};f=function(t){this._updateAnimation()};P._protoOnChanged(xt,"delay",f),P._protoOnChanged(xt,"duration",f),P._protoOnChanged(xt,"cssTransition",f),P._protoOnChanged(xt,"running",f),P._protoOnChanged(xt,"easing",f),xt.$c=function(t){wt.$c.call(this,t.$b={})},xt.$s=function(t){wt.$s.call(this,t.$b),delete t.$b,this.completed()};var Pt=P.Item,kt=Pt.prototype,Ot=P.Loader=function(t,e){Pt.apply(this,arguments)},At=Ot.prototype=Object.create(kt);At.constructor=Ot,At.componentName="core.Loader",At.loaded=P.createSignal("loaded"),At.itemCompleted=P.createSignal("itemCompleted"),s.addProperty(At,"string","source"),s.addProperty(At,"Component","sourceComponent"),s.addProperty(At,"Object","item"),s.addProperty(At,"bool","trace"),At.discardItem=function(){this._itemCompleted=!1;var t=this.item;t&&(t.discard(),this.item=null)},At.discard=function(){this.discardItem(),P.Item.prototype.discard.call(this)},At._loadSource=function(){var t=this.source;this.trace&&log("loading "+t+"…");for(var e=t.split("."),i=x;e.length;){if(void 0===(i=i[e.shift()]))throw new Error("unknown component used: "+t)}return new i(this)},At._load=function(){var t;this._get("model",!0);if(this.source)t=this._loadSource(),P.core.createObject(t);else{if(!this.sourceComponent)return;if(!(this.sourceComponent instanceof P.Component))throw new Error("sourceComponent assigned to Loader "+this.getComponentPath()+" is not an instance of Component");this.trace&&log("loading component "+this.sourceComponent.getComponentPath());var e=this.parent._get("model",!0);t=this.sourceComponent.delegate(this,e||{}),this._updateVisibilityForChild(t,this.recursiveVisible),this._tryFocus()}if(this.item=t,this.loaded(t),t.__complete!==P.CoreObject.prototype.__complete){var i=function(){this.item===t&&(this._itemCompleted=!0,this.itemCompleted(t))}.bind(this);this._context.__onCompleted({__complete:i})}else this._itemCompleted=!0,this.itemCompleted(t)},At.__complete=function(){kt.__complete.call(this),this.item||!this.source&&!this.sourceComponent||this._load()},At.on=function(t,e){P.Item.prototype.on.apply(this,arguments),"loaded"===t&&this.item&&e(this.item),"itemCompleted"===t&&this._itemCompleted&&e(this.item)},P._protoOnChanged(At,"recursiveVisible",function(t){this.item&&this._updateVisibilityForChild(this.item,t)});f=function(t){this.discardItem(),this._load()};P._protoOnChanged(At,"source",f),P._protoOnChanged(At,"sourceComponent",f),At.$c=function(t){kt.$c.call(this,t.$b={})},At.$s=function(t){kt.$s.call(this,t.$b),delete t.$b,this.completed()};var St=P.Item,Tt=St.prototype,zt=P.Image=function(t,e){St.apply(this,arguments),this._context.backend.initImage(this),this._scheduleLoad()},It=zt.prototype=Object.create(Tt);It.constructor=zt,It.componentName="core.Image",s.addProperty(It,"int","paintedWidth"),s.addProperty(It,"int","paintedHeight"),s.addProperty(It,"int","sourceWidth"),s.addProperty(It,"int","sourceHeight"),s.addProperty(It,"string","source"),s.addProperty(It,"bool","smooth",!0),s.addProperty(It,"bool","preload",!1),It.Null=0,zt.Null=0,It.Ready=1,zt.Ready=1,It.Loading=2,zt.Loading=2,It.Error=3,zt.Error=3,s.addProperty(It,"enum","status"),It.Stretch=0,zt.Stretch=0,It.PreserveAspectFit=1,zt.PreserveAspectFit=1,It.PreserveAspectCrop=2,zt.PreserveAspectCrop=2,It.Tile=3,zt.Tile=3,It.TileVertically=4,zt.TileVertically=4,It.TileHorizontally=5,zt.TileHorizontally=5,It.Pad=6,zt.Pad=6,s.addProperty(It,"enum","fillMode"),It.AlignVCenter=0,zt.AlignVCenter=0,It.AlignTop=1,zt.AlignTop=1,It.AlignBottom=2,zt.AlignBottom=2,s.addProperty(It,"enum","verticalAlignment"),It.AlignHCenter=0,zt.AlignHCenter=0,It.AlignLeft=1,zt.AlignLeft=1,It.AlignRight=2,zt.AlignRight=2,s.addProperty(It,"enum","horizontalAlignment"),It._scheduleLoad=function(){(this.preload||this.recursiveVisible)&&this._context.delayedAction("image.load",this,this._load)},It._load=function(){if(this.status!==this.Ready){if(this.preload||this.recursiveVisible)if(this.source){this.status=this.Loading;var t=this._context,e=this._imageLoaded.bind(this);t.backend.loadImage(this,t.wrapNativeCallback(e))}else this._resetImage()}else this._updatePaintedSize()},It._onError=function(){this.status=this.Error},It._resetImage=function(){this.style("background-image","")},It._updatePaintedSize=function(){var t,e=this.sourceWidth,i=this.sourceHeight,n=this.width,o=this.height;if(e<=0||i<=0||n<=0||o<=0)return this.paintedWidth=0,void(this.paintedHeight=0);switch(this.fillMode){case zt.PreserveAspectFit:t=!1;break;case zt.PreserveAspectCrop:t=!0;break;default:return this.paintedWidth=n,void(this.paintedHeight=o)}var r=n/o,a=e/i;(t?a<r:r<a)?(this.paintedWidth=n,this.paintedHeight=n/a):(this.paintedHeight=o,this.paintedWidth=o*a)},It.getClass=function(){return"core-image"},It._imageLoaded=function(t){if(t){var e={"background-image":'url("'+this.source+'")'},i=t.width,n=t.height;switch(this.sourceWidth=i,this.sourceHeight=n,this.horizontalAlignment){case zt.AlignHCenter:e["background-position-x"]="center";break;case zt.AlignLeft:e["background-position-x"]="left";break;case zt.AlignRight:e["background-position-x"]="right"}switch(this.verticalAlignment){case zt.AlignVCenter:e["background-position-y"]="center";break;case zt.AlignTop:e["background-position-y"]="top";break;case zt.AlignBottom:e["background-position-y"]="bottom"}switch(this.fillMode){case zt.Stretch:e["background-repeat"]="no-repeat",e["background-size"]="100% 100%";break;case zt.TileVertically:e["background-repeat"]="repeat-y",e["background-size"]="100% "+n+"px";break;case zt.TileHorizontally:e["background-repeat"]="repeat-x",e["background-size"]=i+"px 100%";break;case zt.Tile:e["background-repeat"]="repeat-y repeat-x",e["background-size"]="auto";break;case zt.PreserveAspectCrop:e["background-repeat"]="no-repeat",e["background-size"]="cover";break;case zt.Pad:e["background-repeat"]="no-repeat",e["background-position"]="0% 0%",e["background-size"]="auto";break;case zt.PreserveAspectFit:e["background-repeat"]="no-repeat",e["background-size"]="contain"}e["image-rendering"]=this.smooth?"auto":"pixelated",this.style(e),this.status=zt.Ready,this._updatePaintedSize()}else this.status=zt.Error};f=function(t){this._scheduleLoad()};P._protoOnChanged(It,"preload",f),P._protoOnChanged(It,"recursiveVisible",f),P._protoOnChanged(It,"width",f),P._protoOnChanged(It,"height",f),P._protoOnChanged(It,"fillMode",f),P._protoOnChanged(It,"source",function(t){this.status=this.Null,this._scheduleLoad()}),It.$c=function(t){Tt.$c.call(this,t.$b={})},It.$s=function(t){var e=this;Tt.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.sourceWidth},[e,"sourceWidth"]),e._replaceUpdater("height",function(){e.height=e.sourceHeight},[e,"sourceHeight"]),e.completed()};var Et=P.Image,Ut=Et.prototype,Lt=d.PointsText=function(t,e){Et.apply(this,arguments)},Mt=Lt.prototype=Object.create(Ut);Mt.constructor=Lt,Mt.componentName="src.PointsText",s.addProperty(Mt,"int","points"),Mt.$c=function(t){Ut.$c.call(this,t.$b={});var e=new P.Text(this);(t._this$child0=e).$c(t.$c$_this$child0={}),this.addChild(e)},Mt.$s=function(t){var e=this;Ut.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=100*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("height",function(){e.height=100*e._context.virtualScale},[e._context,"virtualScale"]),e._removeUpdater("source"),e.source="tip.png";var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0;var n=x.core.Text.prototype;i._replaceUpdater("y",function(){i.y=27*i._context.virtualScale},[i._context,"virtualScale"]),i._replaceUpdater("width",function(){i.width=100*i._context.virtualScale},[i._context,"virtualScale"]),i._replaceUpdater("text",function(){i.text=i.parent.points},[i.parent,"points"]),i.font._replaceUpdater("pixelSize",function(){i.font.pixelSize=42*i._context.virtualScale},[i._context,"virtualScale"]),i._removeUpdater("horizontalAlignment"),i.horizontalAlignment=n.AlignHCenter,i._removeUpdater("color"),i.color="#fff",i.completed(),e.completed()};var Ht=P.Object,jt=Ht.prototype,Rt=P.Radius=function(t,e){Ht.apply(this,arguments)},Bt=Rt.prototype=Object.create(jt);Bt.defaultProperty="radius",Bt.constructor=Rt,Bt.componentName="core.Radius",s.addProperty(Bt,"real","radius"),s.addProperty(Bt,"real","topLeft"),s.addProperty(Bt,"real","topRight"),s.addProperty(Bt,"real","bottomLeft"),s.addProperty(Bt,"real","bottomRight"),Bt._updateValue=function(){var t=this.radius,e=this.topLeft||t,i=this.topRight||t,n=this.bottomLeft||t,o=this.bottomRight||t;e==i&&n==o&&e==n?this.parent.style("border-radius",e):this.parent.style("border-radius",e+"px "+i+"px "+o+"px "+n+"px")};f=function(t){this._updateValue()};P._protoOnChanged(Bt,"radius",f),P._protoOnChanged(Bt,"topLeft",f),P._protoOnChanged(Bt,"topRight",f),P._protoOnChanged(Bt,"bottomLeft",f),P._protoOnChanged(Bt,"bottomRight",f),Bt.$c=function(t){jt.$c.call(this,t.$b={})},Bt.$s=function(t){jt.$s.call(this,t.$b),delete t.$b,this.completed()};var Nt=P.Rectangle,Dt=Nt.prototype,Ft=d.UiApp=function(t,e){Nt.apply(this,arguments)},Wt=Ft.prototype=Object.create(Dt);Wt.constructor=Ft,Wt.componentName="src.UiApp",s.addProperty(Wt,"int","winLimit",21),Wt.__complete=function(){var t=this._get("hitButton",!0);Dt.__complete.call(this),t.setFocus()},Wt.$c=function(t){var e=this;Dt.$c.call(this,t.$b={});var i=new P.Item(e);(t._this$child0=i).$c(t.$c$_this$child0={});var n=new d.PointsText(i);(t._this_child0$child0=n).$c(t.$c$_this_child0$child0={}),n._setId("opponentPoints"),i.addChild(n);var o=new d.PointsText(i);(t._this_child0$child1=o).$c(t.$c$_this_child0$child1={}),o._setId("playerPoints"),i.addChild(o);var r=new d.CardsStack(i);(t._this_child0$child2=r).$c(t.$c$_this_child0$child2={}),r._setId("cards"),i.addChild(r);var a=new P.Column(i);(t._this_child0$child3=a).$c(t.$c$_this_child0$child3={});var s=new d.TextButton(a);(t._this_child0_child3$child0=s).$c(t.$c$_this_child0_child3$child0={}),s._setId("hitButton"),a.addChild(s);var c=new d.TextButton(a);(t._this_child0_child3$child1=c).$c(t.$c$_this_child0_child3$child1={}),c._setId("standButton"),a.addChild(c),i.addChild(a),e.addChild(i);var l=new d.GameOver(e);(t._this$child1=l).$c(t.$c$_this$child1={}),l._setId("gameOverDialog"),e.addChild(l),e._setId("root")},Wt.$s=function(t){var e=this;Dt.$s.call(e,t.$b),delete t.$b,e.anchors._removeUpdater("fill"),e.anchors.fill=e._context,e._removeUpdater("color"),e.color="#2E7D32";var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i._replaceUpdater("width",function(){i.width=1280*i._context.virtualScale},[i._context,"virtualScale"]),i._replaceUpdater("height",function(){i.height=720*i._context.virtualScale},[i._context,"virtualScale"]);var n=t._this_child0$child0;n.$s(t.$c$_this_child0$child0),delete t.$c$_this_child0$child0,n._replaceUpdater("x",function(){n.x=150*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("y",function(){n.y=100*n._context.virtualScale},[n._context,"virtualScale"]),n._replaceUpdater("points",function(){n.points=n._get("cards").opponentPoints},[n._get("cards"),"opponentPoints"]),n._replaceUpdater("z",function(){n.z=n._get("gameOverDialog").z+1},[n._get("gameOverDialog"),"z"]),n.completed();var o=t._this_child0$child1;o.$s(t.$c$_this_child0$child1),delete t.$c$_this_child0$child1,o._replaceUpdater("x",function(){o.x=150*o._context.virtualScale},[o._context,"virtualScale"]),o.anchors._replaceUpdater("bottom",function(){o.anchors.bottom=o.parent.bottom},[o.parent,"bottom"]),o.anchors._replaceUpdater("bottomMargin",function(){o.anchors.bottomMargin=100*o._context.virtualScale},[o._context,"virtualScale"]),o._replaceUpdater("points",function(){o.points=o._get("cards").playerPoints},[o._get("cards"),"playerPoints"]),o._replaceUpdater("z",function(){o.z=o._get("gameOverDialog").z+1},[o._get("gameOverDialog"),"z"]),o.completed();var r=t._this_child0$child2;r.$s(t.$c$_this_child0$child2),delete t.$c$_this_child0$child2,r.on("gameOver",function(){this._get("gameOverDialog",!0).showDialog()}.bind(r));var a=function(t){var e=this._get("root",!0),i=this._get("gameOverDialog",!0);t>e.winLimit&&i.showDialog()};r.onChanged("opponentPoints",a.bind(r)),r.onChanged("playerPoints",a.bind(r)),r.completed();var s=t._this_child0$child3;s.$s(t.$c$_this_child0$child3),delete t.$c$_this_child0$child3,s.anchors._replaceUpdater("top",function(){s.anchors.top=s._get("cards").bottom},[s._get("cards"),"bottom"]),s.anchors._replaceUpdater("horizontalCenter",function(){s.anchors.horizontalCenter=s._get("cards").horizontalCenter},[s._get("cards"),"horizontalCenter"]),s.anchors._replaceUpdater("topMargin",function(){s.anchors.topMargin=100*s._context.virtualScale},[s._context,"virtualScale"]),s.anchors._replaceUpdater("rightMargin",function(){s.anchors.rightMargin=-50*s._context.virtualScale},[s._context,"virtualScale"]),s._replaceUpdater("spacing",function(){s.spacing=30*s._context.virtualScale},[s._context,"virtualScale"]);var c=t._this_child0_child3$child0;c.$s(t.$c$_this_child0_child3$child0),delete t.$c$_this_child0_child3$child0,c._removeUpdater("text"),c.text="HIT",c.on("pressed",function(){this._get("cards",!0).takeAnotherCard()}.bind(c)),c.completed();var l=t._this_child0_child3$child1;l.$s(t.$c$_this_child0_child3$child1),delete t.$c$_this_child0_child3$child1,l._removeUpdater("text"),l.text="STAND",l.on("pressed",function(){var t=this._get("cards",!0),e=this._get("hitButton",!0);t.playerHold=!0,t.takeAnotherCard(),e.disabled=!0,this.disabled=!0}.bind(l)),l.completed(),s.completed(),i.completed();var d=t._this$child1;d.$s(t.$c$_this$child1),delete t.$c$_this$child1,d._replaceUpdater("playerWin",function(){d.playerWin=d._get("cards").playerPoints<=d._get("root").winLimit&&d._get("cards").playerPoints>d._get("cards").opponentPoints||d._get("cards").opponentPoints>d._get("root").winLimit},[d._get("cards"),"playerPoints",d._get("root"),"winLimit",d._get("cards"),"opponentPoints"]),d._replaceUpdater("tie",function(){d.tie=d._get("cards").playerPoints==d._get("cards").opponentPoints},[d._get("cards"),"playerPoints",d._get("cards"),"opponentPoints"]),d.on("restart",function(){var t=this._get("hitButton",!0),e=this._get("standButton",!0),i=this._get("cards",!0);this.hide(),t.disabled=!1,e.disabled=!1,i.fill()}.bind(d)),d.completed(),e.completed()};var Vt=P.Item,Yt=Vt.prototype,Xt=t.BaseActivity=function(t,e){Vt.apply(this,arguments)},qt=Xt.prototype=Object.create(Yt);qt.constructor=Xt,qt.componentName="controls.core.BaseActivity",qt.started=P.createSignal("started"),qt.stopped=P.createSignal("stopped"),s.addProperty(qt,"bool","active"),s.addProperty(qt,"string","name"),s.addProperty(qt,"Item","manager"),qt.clear=function(){this.manager.clear()},qt.pop=function(t){this.manager.pop(t)},qt.init=function(t,e){},qt.closeAllExcept=function(t){this.manager.closeAllExcept(t)},qt.removeActivity=function(t){this.manager.removeActivity(t)},qt.push=function(t,e,i){this.manager.push(t,e,i)},qt.replaceTopActivity=function(t,e,i){this.manager.replaceTopActivity(t,e,i)},qt.popWithState=function(t){this.manager.popWithState(t)},qt.setIntent=function(t,e){this.manager.setIntent(t,e)},qt.setState=function(t,e){this.manager.setState(t,e)},P._protoOnKey(qt,"Back",function(t,e){return this.manager.pop(),!0}),qt.$c=function(t){Yt.$c.call(this,t.$b={})},qt.$s=function(t){var e=this;Yt.$s.call(e,t.$b),delete t.$b,e._removeUpdater("manager"),e.manager=e.parent,e._replaceUpdater("visible",function(){e.visible=e.active},[e,"active"]),e.completed()};var Kt=t.BaseActivity,Gt=Kt.prototype,Zt=t.LazyActivity=function(t,e){Kt.apply(this,arguments)},Jt=Zt.prototype=Object.create(Gt);Jt.constructor=Zt,Jt.componentName="controls.core.LazyActivity",s.addProperty(Jt,"string","component"),Jt.init=function(){x.controls.core.BaseActivity.prototype.init.apply(this,arguments);var t=this.createActivity();t&&t.init.apply(t,arguments)},Jt.getActivity=function(){return this._get("loader",!0).item},Jt.createActivity=function(){var t=this._get("loader",!0),e=t.item;if(!e){if(t.source=this.component,((e=t.item).anchors.fill=this)._context._processActions(),e.manager=this.manager,!e)throw new Error("can't create component "+this.component);var i=this;e.on("started",function(){i.started()}),e.on("stopped",function(){i.stopped()})}return t.item},Jt.start=function(){this.createActivity().start(),this.visible=!0},Jt.stop=function(){this.visible=!1;var t=this.getActivity();t&&t.stop()},Jt.$c=function(t){Gt.$c.call(this,t.$b={});var e=new P.Loader(this);(t._this$child0=e).$c(t.$c$_this$child0={}),e._setId("loader"),this.addChild(e)},Jt.$s=function(t){var e=this;Gt.$s.call(e,t.$b),delete t.$b,e.anchors._replaceUpdater("fill",function(){e.anchors.fill=e.manager},[e,"manager"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i.anchors._replaceUpdater("fill",function(){i.anchors.fill=i.parent.manager},[i.parent,"manager"]),i.completed(),e.completed()};var Qt=P.Object,te=Qt.prototype,ee=P.Font=function(t,e){Qt.apply(this,arguments)},ie=ee.prototype=Object.create(te);ie.constructor=ee,ie.componentName="core.Font",s.addProperty(ie,"string","family",$manifest$style$font$family),s.addProperty(ie,"bool","italic"),s.addProperty(ie,"bool","bold"),s.addProperty(ie,"bool","underline"),s.addProperty(ie,"bool","overline"),s.addProperty(ie,"bool","strike"),s.addProperty(ie,"bool","strikeout"),s.addProperty(ie,"real","letterSpacing"),s.addProperty(ie,"real","wordSpacing"),s.addProperty(ie,"int","pixelSize",$manifest$style$font$pixelSize),s.addProperty(ie,"int","pointSize"),s.addProperty(ie,"real","lineHeight",$manifest$style$font$lineHeight),s.addProperty(ie,"int","weight"),ie.MixedCase=0,ee.MixedCase=0,ie.AllUppercase=1,ee.AllUppercase=1,ie.AllLowercase=2,ee.AllLowercase=2,ie.SmallCaps=3,ee.SmallCaps=3,ie.Capitalize=4,ee.Capitalize=4,s.addProperty(ie,"enum","capitalization"),ie._updateTextDecoration=function(){var t=(this.underline?" underline":"")+(this.overline?" overline":"")+(this.strike||this.strikeout?" line-through":"");this.parent.style("text-decoration",t),this.parent._updateSize()},P._protoOnChanged(ie,"capitalization",function(t){switch(this.parent.style("text-transform","none"),this.parent.style("font-variant","normal"),t){case this.AllUppercase:this.parent.style("text-transform","uppercase");break;case this.AllLowercase:this.parent.style("text-transform","lowercase");break;case this.SmallCaps:this.parent.style("font-variant","small-caps");break;case this.Capitalize:this.parent.style("text-transform","capitalize")}}),P._protoOnChanged(ie,"pointSize",function(t){0<t&&(this.pixelSize=0),this.parent.style("font-size",0<t?t+"pt":""),this.parent._updateSize()}),P._protoOnChanged(ie,"pixelSize",function(t){0<t&&(this.pointSize=0),this.parent.style("font-size",0<t?t+"px":""),this.parent._updateSize()});f=function(t){this._updateTextDecoration()};P._protoOnChanged(ie,"underline",f),P._protoOnChanged(ie,"overline",f),P._protoOnChanged(ie,"strike",f),P._protoOnChanged(ie,"strikeout",f),P._protoOnChanged(ie,"family",function(t){this.parent.style("font-family",t),this.parent._updateSize()}),P._protoOnChanged(ie,"italic",function(t){this.parent.style("font-style",t?"italic":"normal"),this.parent._updateSize()}),P._protoOnChanged(ie,"weight",function(t){this.parent.style("font-weight",t),this.parent._updateSize()}),P._protoOnChanged(ie,"bold",function(t){this.parent.style("font-weight",t?"bold":"normal"),this.parent._updateSize()}),P._protoOnChanged(ie,"letterSpacing",function(t){this.parent.style("letter-spacing",t+"px"),this.parent._updateSize()}),P._protoOnChanged(ie,"lineHeight",function(t){this.parent.style("line-height",t),this.parent._updateSize()}),P._protoOnChanged(ie,"wordSpacing",function(t){this.parent.style("word-spacing",t+"px"),this.parent._updateSize()}),ie.$c=function(t){te.$c.call(this,t.$b={})},ie.$s=function(t){te.$s.call(this,t.$b),delete t.$b,this.completed()};var ne=P.Object,oe=ne.prototype,re=P.Border=function(t,e){ne.apply(this,arguments)},ae=re.prototype=Object.create(oe);ae.constructor=re,ae.componentName="core.Border",s.addProperty(ae,"int","width"),s.addProperty(ae,"color","color","black"),s.addLazyProperty(ae,"left",function(t,e){var i,n={lazy$left:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$left={}),(i=n.lazy$left).$s(n.$c$lazy$left),delete n.$c$lazy$left,i._removeUpdater("name"),i.name="left",i.completed(),i}),s.addLazyProperty(ae,"right",function(t,e){var i,n={lazy$right:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$right={}),(i=n.lazy$right).$s(n.$c$lazy$right),delete n.$c$lazy$right,i._removeUpdater("name"),i.name="right",i.completed(),i}),s.addLazyProperty(ae,"top",function(t,e){var i,n={lazy$top:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$top={}),(i=n.lazy$top).$s(n.$c$lazy$top),delete n.$c$lazy$top,i._removeUpdater("name"),i.name="top",i.completed(),i}),s.addLazyProperty(ae,"bottom",function(t,e){var i,n={lazy$bottom:i=new P.BorderSide(t,e)};return i.$c(n.$c$lazy$bottom={}),(i=n.lazy$bottom).$s(n.$c$lazy$bottom),delete n.$c$lazy$bottom,i._removeUpdater("name"),i.name="bottom",i.completed(),i}),ae.None=0,re.None=0,ae.Hidden=1,re.Hidden=1,ae.Dotted=2,re.Dotted=2,ae.Dashed=3,re.Dashed=3,ae.Solid=4,re.Solid=4,ae.Double=5,re.Double=5,ae.Groove=6,re.Groove=6,ae.Ridge=7,re.Ridge=7,ae.Inset=8,re.Inset=8,ae.Outset=9,re.Outset=9,s.addProperty(ae,"enum","style",re.Solid),ae.Inner=0,re.Inner=0,ae.Outer=1,re.Outer=1,ae.Center=2,re.Center=2,s.addProperty(ae,"enum","type"),ae._update=function(){var t=this.parent,e=this.width;switch(t.style("border-width",e),this.type){case this.Inner:t._borderXAdjust=0,t._borderYAdjust=0,t._borderInnerWidthAdjust=-2*e,t._borderInnerHeightAdjust=-2*e,t._setSizeAdjust();break;case this.Outer:t._borderXAdjust=-e,t._borderYAdjust=-e,t._borderWidthAdjust=0,t._borderHeightAdjust=0,t._setSizeAdjust();break;case this.Center:t._borderXAdjust=-e/2,t._borderYAdjust=-e/2,t._borderWidthAdjust=-e,t._borderHeightAdjust=-e,t._setSizeAdjust()}},P._protoOnChanged(ae,"width",function(t){this._update()}),P._protoOnChanged(ae,"color",function(t){var e=P.Color.normalize(this.color);this.parent.style("border-color",e)}),P._protoOnChanged(ae,"type",function(t){var e;switch(t){case this.Inner:e="border-box";break;case this.Outer:case this.Center:e="content-box"}this.parent.style("box-sizing",e),this._update()}),P._protoOnChanged(ae,"style",function(t){var e;switch(t){case this.None:e="none";break;case this.Hidden:e="hidden";break;case this.Dotted:e="dotted";break;case this.Dashed:e="dashed";break;case this.Solid:e="solid";break;case this.Double:e="double";break;case this.Groove:e="groove";break;case this.Ridge:e="ridge";break;case this.Inset:e="inset";break;case this.Outset:e="outset"}this.parent.style("border-style",e)}),ae.$c=function(t){oe.$c.call(this,t.$b={})},ae.$s=function(t){oe.$s.call(this,t.$b),delete t.$b,this.completed()};var se=P.Object,ce=se.prototype,le=P.Timer=function(t,e){se.apply(this,arguments),this._trigger=this._context.wrapNativeCallback(this.triggered.bind(this))},de=le.prototype=Object.create(ce);de.constructor=le,de.componentName="core.Timer",de.triggered=P.createSignal("triggered"),s.addProperty(de,"int","interval",1e3),s.addProperty(de,"bool","repeat"),s.addProperty(de,"bool","running"),s.addProperty(de,"bool","triggeredOnStart"),de._clear=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this._interval&&(clearInterval(this._interval),this._interval=void 0)},de.discard=function(){this._clear(),P.Object.prototype.discard.apply(this)},de._restart=function(){this._get("context",!0);if(this._clear(),this.running){this._context;this.repeat?this._interval=setInterval(this._trigger,this.interval):this._timeout=setTimeout(this._trigger,this.interval)}},de.__complete=function(){ce.__complete.call(this),this.running&&this.triggeredOnStart&&this.triggered()},de.stop=function(){this.running=!1},de.start=function(){this.running=!0},de.restart=function(){this.stop(),this.start()},P._protoOnChanged(de,"running",function(t){this._restart(),t&&this.triggeredOnStart&&(this._triggered=!1,this.triggered())});f=function(t){this._restart()};P._protoOnChanged(de,"interval",f),P._protoOnChanged(de,"repeat",f),P._protoOn(de,"triggered",function(){this.repeat||this.triggeredOnStart&&!this._triggered||(this.running=!1),this._triggered=!0}),de.$c=function(t){ce.$c.call(this,t.$b={})},de.$s=function(t){ce.$s.call(this,t.$b),delete t.$b,this.completed()};var he=t.BaseActivity,pe=he.prototype,ue=t.Activity=function(t,e){he.apply(this,arguments)},fe=ue.prototype=Object.create(pe);fe.constructor=ue,fe.componentName="controls.core.Activity",fe.getActivity=function(){return this},fe.stop=function(){this.active=!1,this.stopped()},fe.start=function(){this.active=!0,this.started()},fe.$c=function(t){pe.$c.call(this,t.$b={})},fe.$s=function(t){pe.$s.call(this,t.$b),delete t.$b,this.completed()};var ge=P.Object,_e=ge.prototype,me=P.Effects=function(t,e){ge.apply(this,arguments)},ye=me.prototype=Object.create(_e);ye.constructor=me,ye.componentName="core.Effects",s.addProperty(ye,"real","blur"),s.addProperty(ye,"real","grayscale"),s.addProperty(ye,"real","sepia"),s.addProperty(ye,"real","brightness"),s.addProperty(ye,"real","contrast"),s.addProperty(ye,"real","hueRotate"),s.addProperty(ye,"real","invert"),s.addProperty(ye,"real","saturate"),s.addLazyProperty(ye,"shadow",function(t,e){var i,n={lazy$shadow:i=new P.Shadow(t,e)};return i.$c(n.$c$lazy$shadow={}),(i=n.lazy$shadow).$s(n.$c$lazy$shadow),delete n.$c$lazy$shadow,i.completed(),i}),ye._getFilterStyle=function(){var t=[];return this._addStyle(t,"blur","blur","px"),this._addStyle(t,"grayscale"),this._addStyle(t,"sepia"),this._addStyle(t,"brightness"),this._addStyle(t,"contrast"),this._addStyle(t,"hueRotate","hue-rotate","deg"),this._addStyle(t,"invert"),this._addStyle(t,"saturate"),t},ye._addStyle=function(t,e,i,n){var o=this[e];o&&t.push((i||e)+"("+o+(n||"")+") ")},ye._updateStyle=function(t){var e=this._getFilterStyle().join(""),i=this.parent,n={};n["-webkit-filter"]=e,n.filter=e,!this.shadow||this.shadow._empty()&&!t||(n["box-shadow"]=this.shadow._getFilterStyle()),i.style(n)};f=function(t){this._updateStyle()};P._protoOnChanged(ye,"blur",f),P._protoOnChanged(ye,"grayscale",f),P._protoOnChanged(ye,"sepia",f),P._protoOnChanged(ye,"brightness",f),P._protoOnChanged(ye,"contrast",f),P._protoOnChanged(ye,"hueRotate",f),P._protoOnChanged(ye,"invert",f),P._protoOnChanged(ye,"saturate",f),ye.$c=function(t){_e.$c.call(this,t.$b={})},ye.$s=function(t){_e.$s.call(this,t.$b),delete t.$b,this.completed()};var ve=P.Image,be=ve.prototype,$e=d.Card=function(t,e){ve.apply(this,arguments)},we=$e.prototype=Object.create(be);we.constructor=$e,we.componentName="src.Card",s.addProperty(we,"int","cardNumber"),s.addProperty(we,"string","suit"),s.addProperty(we,"bool","opened"),we.$c=function(t){be.$c.call(this,t.$b={})},we.$s=function(t){var e=this;be.$s.call(e,t.$b),delete t.$b;var i=x.core.Image.prototype;e._replaceUpdater("cardNumber",function(){e.cardNumber=e._get("model").number},[e._get("_delegate"),"_row"]),e._replaceUpdater("suit",function(){e.suit=e._get("model").suit},[e._get("_delegate"),"_row"]),e._replaceUpdater("opened",function(){e.opened=e._get("model").turnedOver},[e._get("_delegate"),"_row"]),e._replaceUpdater("x",function(){e.x=.5*e._get("model").index},[e._get("_delegate"),"_rowIndex"]),e._replaceUpdater("y",function(){e.y=.5*e._get("model").index},[e._get("_delegate"),"_rowIndex"]),e._replaceUpdater("width",function(){e.width=120*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("height",function(){e.height=169*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("source",function(){e.source=e.opened?"cards/"+e.suit+"/"+e.cardNumber+".png":"back.png"},[e,"opened",e,"suit",e,"cardNumber"]),e._removeUpdater("horizontalAlignment"),e.horizontalAlignment=i.AlignLeft,e.transform._replaceUpdater("translateX",function(){e.transform.translateX=e._get("model").xPosition},[e._get("_delegate"),"_row"]),e.transform._replaceUpdater("translateY",function(){e.transform.translateY=e._get("model").yPosition},[e._get("_delegate"),"_row"]),e.transform._replaceUpdater("rotate",function(){e.transform.rotate=e._get("model").rotation},[e._get("_delegate"),"_row"]),e._replaceUpdater("radius",function(){e.radius=10*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("z",function(){e.z=e._get("model").zLayer},[e._get("_delegate"),"_row"]);var n,o={behavior__this_on_transform:n=new P.Animation(e)};n.$c(o.$c$behavior__this_on_transform={}),(n=o.behavior__this_on_transform).$s(o.$c$behavior__this_on_transform),delete o.$c$behavior__this_on_transform,n._removeUpdater("duration"),n.duration=500,n.completed(),e.setAnimation("transform",n),e.completed()};var Ce=P.Rectangle,xe=Ce.prototype,Pe=d.TextButton=function(t,e){Ce.apply(this,arguments)},ke=Pe.prototype=Object.create(xe);ke.constructor=Pe,ke.componentName="src.TextButton",ke.pressed=P.createSignal("pressed"),s.addProperty(ke,"bool","disabled"),s.addProperty(ke,"string","text"),P._protoOn(ke,"clicked",function(){this.disabled||this.pressed()}),P._protoOnKey(ke,"Select",function(t,e){this.disabled||this.pressed()}),ke.$c=function(t){var e=this;xe.$c.call(this,t.$b={});var i=new r.FocusOnHoverMixin(e);(t._this$child0=i).$c(t.$c$_this$child0={}),e.addChild(i);var n=new P.ClickMixin(e);(t._this$child1=n).$c(t.$c$_this$child1={}),e.addChild(n);var o=new P.Text(e);(t._this$child2=o).$c(t.$c$_this$child2={}),o._setId("buttonText"),e.addChild(o)},ke.$s=function(t){var e=this;xe.$s.call(e,t.$b),delete t.$b;var i=x.core.Border.prototype;e._replaceUpdater("width",function(){e.width=150*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("height",function(){e.height=50*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("color",function(){e.color=e.disabled?"#424242":"#F44336"},[e,"disabled"]),e._replaceUpdater("radius",function(){e.radius=e.height/2},[e,"height"]),e.border._replaceUpdater("width",function(){e.border.width=e.activeFocus?3:0},[e,"activeFocus"]),e.border._removeUpdater("type"),e.border.type=i.Outer,e.border._removeUpdater("color"),e.border.color="#fff",e._removeUpdater("focus"),e.focus=!0;var n=t._this$child0;n.$s(t.$c$_this$child0),delete t.$c$_this$child0,n.completed();var o=t._this$child1;o.$s(t.$c$_this$child1),delete t.$c$_this$child1,o.completed();var r=t._this$child2;r.$s(t.$c$_this$child2),delete t.$c$_this$child2,r.anchors._removeUpdater("centerIn"),r.anchors.centerIn=r.parent,r._replaceUpdater("text",function(){r.text=r.parent.text},[r.parent,"text"]),r.font._replaceUpdater("pixelSize",function(){r.font.pixelSize=34*r._context.virtualScale},[r._context,"virtualScale"]),r._removeUpdater("color"),r.color="#fff",r.completed(),e.completed()};var Oe=P.Item,Ae=Oe.prototype,Se=P.Context=function(t,e){Oe.apply(this,arguments),this.options=arguments[2],this.l10n=this.options.l10n||{},((this._local.context=this)._context=this)._started=!1,this._completed=!1,this._processingActions=!1,this._delayedActions=[],this._completedObjects=[],this._stylesRegistered={},this._asyncInvoker=P.safeCall(this,[],function(t){log("async action failed:",t,t.stack)}),this.backend=x._backend(),this._init()},Te=Se.prototype=Object.create(Ae);Te.constructor=Se,Te.componentName="core.Context",Te.message=P.createSignal("message"),Te.keyDown=P.createSignal("keyDown"),Te.keyUp=P.createSignal("keyUp"),s.addProperty(Te,"int","scrollY"),s.addProperty(Te,"int","keyProcessDelay"),s.addProperty(Te,"string","language"),s.addProperty(Te,"System","system"),s.addProperty(Te,"Location","location"),s.addProperty(Te,"Stylesheet","stylesheet"),s.addProperty(Te,"string","buildIdentifier"),s.addProperty(Te,"int","virtualWidth",$manifest$virtual$width),s.addProperty(Te,"int","virtualHeight",$manifest$virtual$height),s.addProperty(Te,"real","virtualScale"),Te._processActions=function(){if(this._started&&!this._processingActions){this._processingActions=!0;for(var t=this._asyncInvoker;this._delayedActions.length||this._completedObjects.length;){var e=this._delayedActions;this._delayedActions=[];for(var i=0,n=e.length;i<n;++i)t(e[i]);var o=this._completedObjects;this._completedObjects=[];for(i=0,n=o.length;i<n;++i){var r=o[i];try{r.__complete()}catch(t){log("onCompleted failed",t,t.stack)}}}this._processingActions=!1,this.backend.tick(this)}},Te._init=function(){log("Context: initializing..."),new this.backend.init(this)},Te._run=function(){log("Context: signalling layout"),this.visibleInView=!0,this.newBoundingBox(),log("Context: calling completed()"),this._started=!0,this._processActions(),this._completed=!0},Te.qsTr=function(){return this.tr.apply(this,arguments)},Te.init=function(){this.__init(),this.backend.initSystem(this.system)},Te.run=function(){this.backend.run(this,this._run.bind(this))},Te.scheduleComplete=function(){this._get("context",!0);this.delayedAction("context:completed",this,this._processActions)},Te.scheduleAction=function(t){this._delayedActions.push(t)},Te.wrapNativeCallback=function(e){var i=this;return function(){try{var t=e.apply(this,arguments);return i._processActions(),t}catch(t){throw i._processActions(),t}}},Te.start=function(t){return this.children.push(t),t.__init(),log("Context: created instance"),t},Te.registerStyle=function(t,e,i){var n=(i=this.mangleClass(i))?e+"."+i:e;n in this._stylesRegistered||(t.registerStyle(this.stylesheet,n),this._stylesRegistered[n]=!0)},Te.processKey=function(t,e){for(var i=s.forEach(this,P.Item.prototype._enqueueNextChildInFocusChain,[]),n=i.length,o=0;o<n;++o){if(i[o]._processKey(t,e))return!0}return!1},Te.updateL10n=function(t,e){this.l10n[t]=e,this.__properties.language.callOnChanged(this,"language",this.language,this.language)},Te.mangleClass=function(t){return $manifest$html5$prefix+t},Te.delayedAction=function(t,e,i,n){if(e._registerDelayedAction(t)){var o=function(){e._cancelDelayedAction(t),i.call(e)};0<n?setTimeout(this.wrapNativeCallback(o),n):0===n?this.backend.requestAnimationFrame(this.wrapNativeCallback(o)):this.scheduleAction(o)}},Te.__onCompleted=function(t){this._completedObjects.push(t)},Te.createElement=function(t,e){return this.backend.createElement(this,t,e)},Te.tr=function(t){this._get("context",!0);var i=arguments,e=this.language,n=(this.l10n[e]||{})[t]||{};for(var o in n){t=n[o];break}return t.replace(/%(\d+)/,function(t,e){return i[e]})},Te.$c=function(t){var e=this;Ae.$c.call(this,t.$b={});var i=new P.System(e);(t._this$system=i).$c(t.$c$_this$system={}),e.system=i;var n=new P.Location(e);(t._this$location=n).$c(t.$c$_this$location={}),e.location=n;var o=new a.Stylesheet(e);(t._this$stylesheet=o).$c(t.$c$_this$stylesheet={}),e.stylesheet=o},Te.$s=function(t){var e=this;Ae.$s.call(e,t.$b),delete t.$b;var i=t._this$system;i.$s(t.$c$_this$system),delete t.$c$_this$system,i.completed();var n=t._this$location;n.$s(t.$c$_this$location),delete t.$c$_this$location,n.completed();var o=t._this$stylesheet;o.$s(t.$c$_this$stylesheet),delete t.$c$_this$stylesheet,o.completed(),e._replaceUpdater("virtualScale",function(){e.virtualScale=Math.min((e.system.resolutionWidth||e.width)/e.virtualWidth,(e.system.resolutionHeight||e.height)/e.virtualHeight)},[e.system,"resolutionWidth",e,"width",e,"virtualWidth",e.system,"resolutionHeight",e,"height",e,"virtualHeight"]),e._removeUpdater("visibleInView"),e.visibleInView=!1,e.completed()};var ze=P.Item,Ie=ze.prototype,Ee=d.CardsStack=function(t,e){ze.apply(this,arguments)},Ue=Ee.prototype=Object.create(Ie);Ue.constructor=Ee,Ue.componentName="src.CardsStack",Ue.gameOver=P.createSignal("gameOver"),s.addProperty(Ue,"int","playerPoints"),s.addProperty(Ue,"int","opponentPoints"),s.addProperty(Ue,"bool","playerHold"),s.addProperty(Ue,"bool","opponentHold"),s.addProperty(Ue,"bool","playerMoved"),Ue.fill=function(){var t=this._get("cards",!0),e=this._get("cardsStack",!0),i=(t=[],["hearts","spades","diamonds","clubs"]);for(var n in i)for(var o=2;o<15;++o){var r=o;if(10<o)switch(o){case 11:r=2;break;case 12:r=3;break;case 13:r=4;break;case 14:r=11}t.push({suit:i[n],number:o,points:r,xPosition:0,yPosition:0,rotation:0})}this.shuffleArray(t),e.model.assign(t),this._last=t.length-1,this.playerPoints=0,this.opponentPoints=0,this.playerHold=!1,this.opponentHold=!1,this.playerMoved=!1},Ue.takeAnotherCard=function(){var t=this._get("opponentDelay",!0),e=this._get("root",!0),i=this._get("stackProto",!0),n=(this._get("cards",!0),this._get("cardsStack",!0)),o=this._get("model",!0);if(!t.running)if(this.opponentHold&&this.playerHold||this.playerPoints>e.winLimit||this.opponentPoints>e.winLimit)i.gameOver();else if(this.opponentHold&&this.playerMoved)this.playerMoved=!this.playerMoved;else{if(this.playerHold&&this.opponentPoints>this.playerPoints)return this.opponentHold=!0,void this.gameOver();this.playerHold&&(this.playerMoved=!0);var r=this._last,a=n.count-this._last,s=(o=n.model).get(r),c=this._context.virtualScale;o.setProperty(r,"turnedOver",!0),o.setProperty(r,"zLayer",a),o.setProperty(r,"rotation",Math.floor(10*Math.random())-5),o.setProperty(r,"xPosition",(40*a-700)*c),this.playerMoved?(o.setProperty(r,"yPosition",-200*c),i.opponentPoints+=s.points):(o.setProperty(r,"yPosition",250*c),i.playerPoints+=s.points),this.playerMoved=!this.playerMoved,--this._last,(this.playerMoved||this.playerHold)&&t.restart()}},Ue.opponentMove=function(){17<=this._get("stackProto",!0).opponentPoints&&(this.opponentHold=!0),this.takeAnotherCard()},Ue.__complete=function(){Ie.__complete.call(this),this.fill()},Ue.shuffleArray=function(t){for(var e=t.length-1;0<e;--e){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}},Ue.$c=function(t){var e=this;Ie.$c.call(this,t.$b={});var i=new P.ClickMixin(e);(t._this$child0=i).$c(t.$c$_this$child0={}),e.addChild(i);var n=new P.Repeater(e);(t._this$child1=n).$c(t.$c$_this$child1={}),n._setId("cardsStack");var o=new P.ListModel(n);(t._this_child1$model=o).$c(t.$c$_this_child1$model={}),n.model=o,n.delegate=function(t,e){var i,n={delegate:i=new d.Card(t,e)};return i.$c(n.$c$delegate={}),(i=n.delegate).$s(n.$c$delegate),delete n.$c$delegate,i.completed(),i},e.addChild(n);var r=new P.Timer(e);(t._this$child2=r).$c(t.$c$_this$child2={}),r._setId("opponentDelay"),e.addChild(r),e._setId("stackProto")},Ue.$s=function(t){var e=this;Ie.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=200*e._context.virtualScale},[e._context,"virtualScale"]),e._replaceUpdater("height",function(){e.height=200*e._context.virtualScale},[e._context,"virtualScale"]),e.anchors._replaceUpdater("right",function(){e.anchors.right=e.parent.right},[e.parent,"right"]),e.anchors._replaceUpdater("verticalCenter",function(){e.anchors.verticalCenter=e.parent.verticalCenter},[e.parent,"verticalCenter"]),e.anchors._replaceUpdater("bottomMargin",function(){e.anchors.bottomMargin=-100*e._context.virtualScale},[e._context,"virtualScale"]),e.anchors._replaceUpdater("rightMargin",function(){e.anchors.rightMargin=100*e._context.virtualScale},[e._context,"virtualScale"]);var i=t._this$child0;i.$s(t.$c$_this$child0),delete t.$c$_this$child0,i.completed();var n=t._this$child1;n.$s(t.$c$_this$child1),delete t.$c$_this$child1;var o=t._this_child1$model;o.$s(t.$c$_this_child1$model),delete t.$c$_this_child1$model,o.completed(),n.completed();var r=t._this$child2;r.$s(t.$c$_this$child2),delete t.$c$_this$child2,r._removeUpdater("interval"),r.interval=500,r.on("triggered",function(){this.parent.opponentMove()}.bind(r)),r.completed(),e.completed()};var Le=P.Object,Me=Le.prototype,He=P.Transform=function(t,e){Le.apply(this,arguments),this._transforms=new P.transform.Transform},je=He.prototype=Object.create(Me);je.constructor=He,je.componentName="core.Transform",s.addProperty(je,"int","perspective"),s.addProperty(je,"int","translateX"),s.addProperty(je,"int","translateY"),s.addProperty(je,"int","translateZ"),s.addProperty(je,"real","rotateX"),s.addProperty(je,"real","rotateY"),s.addProperty(je,"real","rotateZ"),s.addProperty(je,"real","rotate"),s.addProperty(je,"real","scaleX"),s.addProperty(je,"real","scaleY"),s.addProperty(je,"real","skewX"),s.addProperty(je,"real","skewY"),je._updateTransform=function(){this.parent.style("transform",this._transforms)},je._animateAll=function(i){var n=this;["perspective","translateX","translateY","translateZ","rotateX","rotateY","rotateZ","rotate","scaleX","scaleY","skewX","skewY"].forEach(function(t){var e=new P.Animation(n);P.core.createObject(e),e.delay=i.delay,e.duration=i.duration,e.easing=i.easing,n.setAnimation(t,e)})},je.getAnimation=function(t){var e=P.Object.prototype.getAnimation.call(this,t);return e||(e=P.Object.prototype.getAnimation.call(this.parent,"transform")),e},P._protoOnChanged(je,"perspective",function(t){this._transforms.add("perspective",t,"px"),this._updateTransform()}),P._protoOnChanged(je,"rotate",function(t){this._transforms.add("rotate",t,"deg"),this._updateTransform()}),P._protoOnChanged(je,"rotateX",function(t){this._transforms.add("rotateX",t,"deg"),this._updateTransform()}),P._protoOnChanged(je,"rotateY",function(t){this._transforms.add("rotateY",t,"deg"),this._updateTransform()}),P._protoOnChanged(je,"rotateZ",function(t){this._transforms.add("rotateZ",t,"deg"),this._updateTransform()}),P._protoOnChanged(je,"scaleX",function(t){this._transforms.add("scaleX",t),this._updateTransform()}),P._protoOnChanged(je,"scaleY",function(t){this._transforms.add("scaleY",t),this._updateTransform()}),P._protoOnChanged(je,"skewX",function(t){this._transforms.add("skewX",t,"deg"),this._updateTransform()}),P._protoOnChanged(je,"skewY",function(t){this._transforms.add("skewY",t,"deg"),this._updateTransform()}),P._protoOnChanged(je,"translateX",function(t){this._transforms.add("translateX",t,"px"),this._updateTransform()}),P._protoOnChanged(je,"translateY",function(t){this._transforms.add("translateY",t,"px"),this._updateTransform()}),P._protoOnChanged(je,"translateZ",function(t){this._transforms.add("translateZ",t,"px"),this._updateTransform()}),je.$c=function(t){Me.$c.call(this,t.$b={})},je.$s=function(t){Me.$s.call(this,t.$b),delete t.$b,this.completed()};var Re=P.Object,Be=Re.prototype,Ne=P.BorderSide=function(t,e){Re.apply(this,arguments)},De=Ne.prototype=Object.create(Be);De.constructor=Ne,De.componentName="core.BorderSide",s.addProperty(De,"string","name"),s.addProperty(De,"int","width"),s.addProperty(De,"color","color"),s.addProperty(De,"int","style"),s.addProperty(De,"int","type"),De._updateStyle=function(){var t=x.core.Border.prototype;if(this.parent&&this.parent.parent&&this.name){var e;t=P.Border;switch(this.style){case t.None:e="none";break;case t.Hidden:e="hidden";break;case t.Dotted:e="dotted";break;case t.Dashed:e="dashed";break;case t.Solid:e="solid";break;case t.Double:e="double";break;case t.Groove:e="groove";break;case t.Ridge:e="ridge";break;case t.Inset:e="inset";break;case t.Outset:e="outset"}var i=this.width+"px "+e+" "+P.Color.normalize(this.color);this.parent.parent.style("border-"+this.name,i)}};f=function(t){this._updateStyle()};P._protoOnChanged(De,"width",f),P._protoOnChanged(De,"color",f),P._protoOnChanged(De,"style",f),De.$c=function(t){Be.$c.call(this,t.$b={})},De.$s=function(t){var e=this;Be.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.parent.width},[e.parent,"width"]),e._replaceUpdater("color",function(){e.color=e.parent.color},[e.parent,"color"]),e._replaceUpdater("style",function(){e.style=e.parent.style},[e.parent,"style"]),e._replaceUpdater("type",function(){e.type=e.parent.type},[e.parent,"type"]),e.completed()};var Fe=P.Object,We=Fe.prototype,Ve=P.Model=function(t,e){Fe.apply(this,arguments)},Ye=Ve.prototype=Object.create(We);Ye.constructor=Ve,Ye.componentName="core.Model",Ye.reset=P.createSignal("reset"),Ye.rowsInserted=P.createSignal("rowsInserted"),Ye.rowsChanged=P.createSignal("rowsChanged"),Ye.rowsRemoved=P.createSignal("rowsRemoved"),s.addProperty(Ye,"int","count"),Ye.attachTo=function(t){var e=this._get("model",!0);t._modelAttached&&t._modelAttached.detachFrom(t),t._modelReset||(t._modelReset=t._onReset.bind(t)),t._modelRowsInserted||(t._modelRowsInserted=t._onRowsInserted.bind(t)),t._modelRowsChanged||(t._modelRowsChanged=t._onRowsChanged.bind(t)),t._modelRowsRemoved||(t._modelRowsRemoved=t._onRowsRemoved.bind(t));var i=P.Model,n=typeof(e=this);if(void 0!==i&&e instanceof i);else if(Array.isArray(e))e=new P.model.ArrayModelWrapper(e);else{if("number"!==n)throw new Error("unknown value of type '"+typeof e+"', attached to model property: "+e+("object"===n&&"componentName"in e?", component name: "+e.componentName:""));for(var o=[],r=0;r<e;++r)o.push({});e=new P.model.ArrayModelWrapper(o)}e.on("reset",t._modelReset),e.on("rowsInserted",t._modelRowsInserted),e.on("rowsChanged",t._modelRowsChanged),e.on("rowsRemoved",t._modelRowsRemoved),t._modelAttached=e,t._onReset()},Ye.detachFrom=function(t){var e=this._get("model",!0);(e=t._modelAttached)&&(t._modelAttached=null,e.removeListener("reset",t._modelReset),e.removeListener("rowsInserted",t._modelRowsInserted),e.removeListener("rowsChanged",t._modelRowsChanged),e.removeListener("rowsRemoved",t._modelRowsRemoved))},Ye.$c=function(t){We.$c.call(this,t.$b={})},Ye.$s=function(t){We.$s.call(this,t.$b),delete t.$b,this.completed()};var Xe=P.Model,qe=Xe.prototype,Ke=P.ListModel=function(t,e){Xe.apply(this,arguments),this._rows=[],this.connectOnChanged(this._context,"language",this._languageChanged.bind(this))},Ge=Ke.prototype=Object.create(qe);Ge.constructor=Ke,Ge.componentName="core.ListModel",s.addProperty(Ge,"array","data"),s.addProperty(Ge,"array","localizedFields"),Ge._languageChanged=function(){0<this.localizedFields.length&&this.reset()},Ge.clear=function(){this.assign([])},Ge.forEach=function(t){return this._rows.forEach(t)},Ge.addChild=function(t){this.append(t)},Ge.move=function(t,e){for(;t<0;)t+=this._rows.length;for(;e<0;)e+=this._rows.length;if(e>=this._rows.length)for(var i=e-this._rows.length;1+i--;)this._rows.push(void 0);this._rows.splice(e,0,this._rows.splice(t,1)[0]),this.reset()},Ge.get=function(t){var e=this._get("context",!0);if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");var i=this._rows[t];if(!(i instanceof Object))throw new Error("row is non-object");var n=this.localizedFields,o=n.length;if(o<=0)return i.index=t,i;var r=Object.assign({},i);r.index=t;e=this._context;for(var a=0;a<o;++a){var s=n[a];s in r&&(r[s]=e.tr(r[s]))}return r},Ge.remove=function(t,e){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds");void 0===e&&(e=1),this._rows.splice(t,e),this.count=this._rows.length,this.rowsRemoved(t,t+e)},Ge.getProperty=function(t,e){if("index"===e)return t;if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");var i=this._rows[t];if(!(i instanceof Object))throw new Error("row is non-object");return i[e]},Ge.setProperty=function(t,e,i){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");var n=this._rows[t];if(!(n instanceof Object))throw new Error("row is non-object, invalid index? ("+t+")");return n[e]!==i&&(n[e]=i,this.rowsChanged(t,t+1),!0)},Ge.insert=function(t,e){if(t<0||t>this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");this._rows.splice(t,0,e),this.count=this._rows.length,this.rowsInserted(t,t+1)},Ge.set=function(t,e){if(t<0||t>=this._rows.length)throw new Error("index "+t+" out of bounds ("+this._rows.length+")");if(!(e instanceof Object))throw new Error("row is non-object");this._rows[t]=e,this.rowsChanged(t,t+1)},Ge.append=function(t){var e=this._rows.length;if(Array.isArray(t)){if(0===t.length)return;Array.prototype.push.apply(this._rows,t),this.count=this._rows.length,this.rowsInserted(e,e+t.length)}else this._rows.push(t),this.count=this._rows.length,this.rowsInserted(e,e+1)},Ge.assign=function(t){this._rows=t,this.count=this._rows.length,this.reset()},P._protoOnChanged(Ge,"data",function(t){this.assign(t)}),Ge.$c=function(t){qe.$c.call(this,t.$b={})},Ge.$s=function(t){qe.$s.call(this,t.$b),delete t.$b,this.completed()};var Ze=P.Object,Je=Ze.prototype,Qe=P.Location=function(t,e){Ze.apply(this,arguments);var i=P.__locationBackend;if(!i)throw new Error("no backend found");this.impl=i().createLocation(this)},ti=Qe.prototype=Object.create(Je);ti.constructor=Qe,ti.componentName="core.Location",s.addProperty(ti,"string","hash"),s.addProperty(ti,"string","host"),s.addProperty(ti,"string","href"),s.addProperty(ti,"string","port"),s.addProperty(ti,"string","origin"),s.addProperty(ti,"string","hostname"),s.addProperty(ti,"string","pathname"),s.addProperty(ti,"string","protocol"),s.addProperty(ti,"string","search"),s.addProperty(ti,"Object","state"),ti.reload=function(){this.impl.reload()},ti.changeHref=function(t){this.impl.changeHref(t)},ti.pushState=function(t,e,i){this.impl.pushState(t,e,i)},ti.$c=function(t){Je.$c.call(this,t.$b={})},ti.$s=function(t){Je.$s.call(this,t.$b),delete t.$b,this.completed()};var ei=P.Object,ii=ei.prototype,ni=P.Anchors=function(t,e){ei.apply(this,arguments),this._items=[],this._grabX=!1,this._grabY=!1},oi=ni.prototype=Object.create(ii);oi.constructor=ni,oi.componentName="core.Anchors",s.addProperty(oi,"AnchorLine","bottom"),s.addProperty(oi,"AnchorLine","verticalCenter"),s.addProperty(oi,"AnchorLine","top"),s.addProperty(oi,"AnchorLine","left"),s.addProperty(oi,"AnchorLine","horizontalCenter"),s.addProperty(oi,"AnchorLine","right"),s.addProperty(oi,"Item","fill"),s.addProperty(oi,"Item","centerIn"),s.addProperty(oi,"int","margins"),s.addProperty(oi,"int","bottomMargin"),s.addProperty(oi,"int","topMargin"),s.addProperty(oi,"int","leftMargin"),s.addProperty(oi,"int","rightMargin"),oi._scheduleUpdate=function(){this._context.delayedAction("update-anchors",this,this._updateAll)},oi._updateAll=function(){var t=this,e=t.parent;if(null!==e){var i,n,o,r,a,s,c=e.parent.toScreen(),l=c[0],d=c[1],h=t.fill,p=t._getAnchor("left")||(h?h.left:null),u=t._getAnchor("right")||(h?h.right:null),f=t._getAnchor("top")||(h?h.top:null),g=t._getAnchor("bottom")||(h?h.bottom:null),_=t.centerIn,m=t._getAnchor("horizontalCenter")||(_?_.horizontalCenter:null),y=t._getAnchor("verticalCenter")||(_?_.verticalCenter:null),v=t.leftMargin||t.margins,b=t.rightMargin||t.margins,$=t.topMargin||t.margins,w=t.bottomMargin||t.margins,C=[],x=[],P=function(t){var e,i=t[0],n=t[1],o=C.indexOf(i);return o<0?(e=i.toScreen(),C.push(i),x.push(e)):e=x[o],e[n]};p&&u?(i=P(p),o=P(u),e.x=i+v-l-e.viewX,e.width=o-i-b-v):p&&m?(i=P(p),a=P(m),e.x=i+v-l-e.viewX,e.width=2*(a-i)-b-v):m&&u?(a=P(m),o=P(u),e.width=2*(o-a)-b-v,e.x=a-(e.width+v-b)/2-l-e.viewX):p?(i=P(p),e.x=i+v-l-e.viewX):u?(o=P(u),e.x=o-l-b-e.width-e.viewX):m?(a=P(m),e.x=a-(e.width+v-b)/2-l-e.viewX):this._grabX&&(e.x=v),f&&g?(n=P(f),r=P(g),e.y=n+$-d-e.viewY,e.height=r-n-w-$):f&&y?(n=P(f),s=P(y),e.y=n+$-d-e.viewY,e.height=2*(s-n)-w-$):y&&g?(s=P(y),r=P(g),e.height=2*(r-s)-w-$,e.y=s-(e.height+$-w)/2-d-e.viewY):f?(n=P(f),e.y=n+$-d-e.viewY):g?(r=P(g),e.y=r-d-w-e.height-e.viewY):y?(s=P(y),e.y=s-(e.height+$-w)/2-d-e.viewY):this._grabY&&(e.y=$)}},oi._grab=function(t,e){"x"===e&&(this._grabX=!0),"y"===e&&(this._grabY=!0),t._removeUpdater(e)},oi._getAnchor=function(t){var e=this[t];return e?Array.isArray(e)?e:e[t]:null},oi._subscribe=function(t){var e=this._items;e.indexOf(t)<0&&(e.push(t),this.connectOn(t,"newBoundingBox",this._scheduleUpdate.bind(this)))},P._protoOnChanged(oi,"fill",function(t){if(this._scheduleUpdate(),null!==t){var e=this.parent;this._grab(e,"x"),this._grab(e,"width"),this._grab(e,"y"),this._grab(e,"height"),this._subscribe(t)}}),P._protoOnChanged(oi,"centerIn",function(t){if(this._scheduleUpdate(),null!==t){var e=this.parent;this._grab(e,"x"),this._grab(e,"y"),this._subscribe(t),this._subscribe(e)}}),P._protoOnChanged(oi,"bottom",function(t){this._scheduleUpdate();var e=this._getAnchor("bottom");if(null!==e){var i=this.parent;this._grab(i,"y"),(this.top||this.verticalCenter)&&this._grab(i,"height"),this._subscribe(i),this._subscribe(e[0])}}),P._protoOnChanged(oi,"horizontalCenter",function(t){this._scheduleUpdate();var e=this._getAnchor("horizontalCenter");if(null!==e){var i=this.parent;this._grab(i,"x"),(this.left||this.right)&&this._grab(i,"width"),this._subscribe(i),this._subscribe(e[0])}}),P._protoOnChanged(oi,"left",function(t){this._scheduleUpdate();var e=this._getAnchor("left");if(null!==e){var i=this.parent;this._grab(i,"x"),(this.right||this.horizontalCenter)&&(this._grab(i,"width"),this._subscribe(i)),this._subscribe(e[0])}}),P._protoOnChanged(oi,"right",function(t){this._scheduleUpdate();var e=this._getAnchor("right");if(null!==e){var i=this.parent;this._grab(i,"x"),(this.left||this.horizontalCenter)&&this._grab(i,"width"),this._subscribe(i),this._subscribe(e[0])}}),P._protoOnChanged(oi,"top",function(t){this._scheduleUpdate();var e=this._getAnchor("top");if(null!==e){var i=this.parent;this._grab(i,"y"),(this.bottom||this.verticalCenter)&&(this._grab(i,"height"),this._subscribe(i)),this._subscribe(e[0])}}),P._protoOnChanged(oi,"verticalCenter",function(t){this._scheduleUpdate();var e=this._getAnchor("verticalCenter");if(null!==e){var i=this.parent;this._grab(i,"y"),(this.top||this.bottom)&&this._grab(i,"height"),this._subscribe(i),this._subscribe(e[0])}});f=function(t){this.parent.anchorsMarginsUpdated(),this._scheduleUpdate()};P._protoOnChanged(oi,"leftMargin",f),P._protoOnChanged(oi,"rightMargin",f),P._protoOnChanged(oi,"topMargin",f),P._protoOnChanged(oi,"bottomMargin",f),P._protoOnChanged(oi,"margin",f),oi.$c=function(t){ii.$c.call(this,t.$b={})},oi.$s=function(t){ii.$s.call(this,t.$b),delete t.$b,this.completed()};var ri=P.BaseMixin,ai=ri.prototype,si=P.ClickMixin=function(t,e){ri.apply(this,arguments),this._bindClick(this.enabled)},ci=si.prototype=Object.create(ai);ci.constructor=si,ci.componentName="core.ClickMixin",ci._bindClick=function(t){t&&!this._cmClickBinder&&(this._cmClickBinder=new P.EventBinder(this.element),this._cmClickBinder.on("click",P.createSignalForwarder(this.parent,"clicked").bind(this))),this._cmClickBinder&&this._cmClickBinder.enable(t)},P._protoOnChanged(ci,"enabled",function(t){this._bindClick(t)}),ci.$c=function(t){ai.$c.call(this,t.$b={})},ci.$s=function(t){ai.$s.call(this,t.$b),delete t.$b,this.completed()};var li=P.Object,di=li.prototype,hi=P.BaseLayoutContentPadding=function(t,e){li.apply(this,arguments),this.parent._padding=this},pi=hi.prototype=Object.create(di);pi.defaultProperty="all",pi.constructor=hi,pi.componentName="core.BaseLayoutContentPadding",s.addProperty(pi,"int","top"),s.addProperty(pi,"int","left"),s.addProperty(pi,"int","right"),s.addProperty(pi,"int","bottom"),s.addProperty(pi,"int","all");f=function(t){this.parent._scheduleLayout()};P._protoOnChanged(pi,"top",f),P._protoOnChanged(pi,"left",f),P._protoOnChanged(pi,"right",f),P._protoOnChanged(pi,"bottom",f),pi.$c=function(t){di.$c.call(this,t.$b={})},pi.$s=function(t){var e=this;di.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("top",function(){e.top=e.all},[e,"all"]),e._replaceUpdater("left",function(){e.left=e.all},[e,"all"]),e._replaceUpdater("right",function(){e.right=e.all},[e,"all"]),e._replaceUpdater("bottom",function(){e.bottom=e.all},[e,"all"]),e.completed()};var ui=P.Item,fi=ui.prototype,gi=P.BaseViewContent=function(t,e){ui.apply(this,arguments),this.style("will-change","scroll-position, transform, left, top")},_i=gi.prototype=Object.create(fi);_i.constructor=gi,_i.componentName="core.BaseViewContent",_i._updateScrollPositions=function(t,e,i){this._setProperty("x",-t),this._setProperty("y",-e),(void 0===i||i)&&this.parent._scheduleLayout(!0)};f=function(t){this.parent._scheduleLayout()};P._protoOnChanged(_i,"x",f),P._protoOnChanged(_i,"y",f),_i.$c=function(t){fi.$c.call(this,t.$b={})},_i.$s=function(t){fi.$s.call(this,t.$b),delete t.$b,this.completed()};var mi=P.EventEmitter,yi=mi.prototype,vi=P.RAIIEventEmitter=function(t,e){mi.apply(this,arguments),this._onListener={}},bi=vi.prototype=Object.create(yi);bi.constructor=vi,bi.componentName="core.RAIIEventEmitter",bi.removeAllListeners=function(t){P.EventEmitter.prototype.removeAllListeners.call(this,t),t in this._onListener?this._onListener[t][1](t):""in this._onListener&&this._onListener[""][1](t)},bi.on=function(t,e){if(!(t in this._eventHandlers)&&(t in this._onListener?this._onListener[t][0](t):""in this._onListener&&this._onListener[""][0](t),this._eventHandlers[t]))throw new Error("listener callback added event handler");P.EventEmitter.prototype.on.call(this,t,e)},bi.onListener=function(t,e,i){this._onListener[t]=[e,i]},bi.$c=function(t){yi.$c.call(this,t.$b={})},bi.$s=function(t){yi.$s.call(this,t.$b),delete t.$b,this.completed()};var $i=P.Object,wi=$i.prototype,Ci=a.Stylesheet=function(t,e){$i.apply(this,arguments);var i=this._context,n=i.options,o=this.style=i.createElement("style");o.dom.type="text/css",this.prefix=n.prefix;var r=n.id,a=null===document.getElementById(i,r),s=i.system.tapHighlighted;o.setHtml("div#"+r+" { position: absolute; visibility: hidden; left: 0px; top: 0px; }"+(s?this.mangleRule("div","{ -webkit-tap-highlight-color: rgba(255, 255, 255, 0); -webkit-focus-ring-color: rgba(255, 255, 255, 0); outline: none; }"):"")+(a?"body { padding: 0; margin: 0; border: 0px; overflow: hidden; }":"")+this.mangleRule("video","{ position: absolute; }")+this.mangleRule("img","{ position: absolute; -webkit-touch-callout: none; }"));var c=x.html5.html.getElement(i,"head");c.append(o),c.updateStyle(),this._addRule=x.html5.html.createAddRule(o.dom).bind(this),this._lastId=0},xi=Ci.prototype=Object.create(wi);xi.constructor=Ci,xi.componentName="html5.Stylesheet",xi.allocateClass=function(t){var e=this.prefix;return(e||"")+t+"-"+this._lastId++},xi.mangleSelector=function(t){var e=this.prefix;return e?t+"."+e+"core-item":t},xi.mangleRule=function(t,e){return this.mangleSelector(t)+" "+e+" "},xi.addRule=function(t,e){this._addRule(t,e)},xi.$c=function(t){wi.$c.call(this,t.$b={})},xi.$s=function(t){wi.$s.call(this,t.$b),delete t.$b,this.completed()};var Pi=P.Object,ki=Pi.prototype,Oi=P.ContentMargin=function(t,e){Pi.apply(this,arguments)},Ai=Oi.prototype=Object.create(ki);Ai.constructor=Oi,Ai.componentName="core.ContentMargin",s.addProperty(Ai,"int","top"),s.addProperty(Ai,"int","left"),s.addProperty(Ai,"int","right"),s.addProperty(Ai,"int","bottom"),Ai.$c=function(t){ki.$c.call(this,t.$b={})},Ai.$s=function(t){ki.$s.call(this,t.$b),delete t.$b,this.completed()};var Si=P.Item,Ti=Si.prototype,zi=P.Text=function(t,e){Si.apply(this,arguments),this._context.backend.initText(this),0<this.text.length&&this._setText(this.text)},Ii=zi.prototype=Object.create(Ti);Ii.constructor=zi,Ii.componentName="core.Text",s.addProperty(Ii,"string","text"),s.addProperty(Ii,"color","color"),s.addLazyProperty(Ii,"shadow",function(t,e){var i,n={lazy$shadow:i=new P.Shadow(t,e)};return i.$c(n.$c$lazy$shadow={}),(i=n.lazy$shadow).$s(n.$c$lazy$shadow),delete n.$c$lazy$shadow,i.completed(),i}),s.addLazyProperty(Ii,"font",function(t,e){var i,n={lazy$font:i=new P.Font(t,e)};return i.$c(n.$c$lazy$font={}),(i=n.lazy$font).$s(n.$c$lazy$font),delete n.$c$lazy$font,i.completed(),i}),s.addProperty(Ii,"int","paintedWidth"),s.addProperty(Ii,"int","paintedHeight"),Ii.AlignLeft=0,zi.AlignLeft=0,Ii.AlignRight=1,zi.AlignRight=1,Ii.AlignHCenter=2,zi.AlignHCenter=2,Ii.AlignJustify=3,zi.AlignJustify=3,s.addProperty(Ii,"enum","horizontalAlignment"),Ii.AlignTop=0,zi.AlignTop=0,Ii.AlignBottom=1,zi.AlignBottom=1,Ii.AlignVCenter=2,zi.AlignVCenter=2,s.addProperty(Ii,"enum","verticalAlignment"),Ii.NoWrap=0,zi.NoWrap=0,Ii.WordWrap=1,zi.WordWrap=1,Ii.WrapAnywhere=2,zi.WrapAnywhere=2,Ii.Wrap=3,zi.Wrap=3,s.addProperty(Ii,"enum","wrapMode"),Ii.Html=0,zi.Html=0,Ii.Text=1,zi.Text=1,s.addProperty(Ii,"enum","textFormat"),Ii._updateSize=function(){this.recursiveVisible&&(this._updateSizeNeeded||this.clip)&&this._scheduleUpdateSize()},Ii._updateStyle=function(){this.shadow&&!this.shadow._empty()?this.style("text-shadow",this.shadow._getFilterStyle()):this.style("text-shadow",""),P.Item.prototype._updateStyle.apply(this,arguments)},Ii._updateSizeImpl=function(){if(0===this.text.length)return this.paintedWidth=0,void(this.paintedHeight=0);this._context.backend.layoutText(this)},Ii._scheduleUpdateSize=function(){this._context.delayedAction("text:update-size",this,this._updateSizeImpl)},Ii._enableSizeUpdate=function(){this._updateSizeNeeded=!0,this._updateSize()},Ii._updateWSHandling=function(){var t=this.textFormat===this.Text;switch(this.wrapMode){case this.NoWrap:this.style({"white-space":t?"pre":"nowrap","word-break":""});break;case this.Wrap:case this.WordWrap:this.style({"white-space":t?"pre-wrap":"normal","word-break":""});break;case this.WrapAnywhere:this.style({"white-space":t?"pre-wrap":"normal","word-break":"break-all"})}this._updateSize()},Ii.getClass=function(){return"core-text"},Ii._setText=function(t){this._context.backend.setText(this,t)},Ii.on=function(t,e){this._updateSizeNeeded||"newBoundingBox"===t&&this._enableSizeUpdate(),P.Item.prototype.on.apply(this,arguments)},Ii.onChanged=function(t,e){if(!this._updateSizeNeeded)switch(t){case"right":case"width":case"bottom":case"height":case"verticalCenter":case"horizontalCenter":this._enableSizeUpdate()}P.Item.prototype.onChanged.apply(this,arguments)},Ii.registerStyle=function(t,e){t.addRule(e,"width: auto; height: auto;")},P._protoOnChanged(Ii,"recursiveVisible",function(t){t&&this._updateSize()}),P._protoOnChanged(Ii,"horizontalAlignment",function(t){switch(t){case this.AlignLeft:this.style("text-align","left");break;case this.AlignRight:this.style("text-align","right");break;case this.AlignHCenter:this.style("text-align","center");break;case this.AlignJustify:this.style("text-align","justify")}}),P._protoOnChanged(Ii,"verticalAlignment",function(t){if(this._enableSizeUpdate(),$manifest$requireVerticalTextAlignmentStyle)switch(t){case this.AlignTop:this.style("-pure-text-vertical-align","top");break;case this.AlignVCenter:this.style("-pure-text-vertical-align","middle");break;case this.AlignBottom:this.style("-pure-text-vertical-align","bottom")}});f=function(t){this._updateWSHandling()};P._protoOnChanged(Ii,"textFormat",f),P._protoOnChanged(Ii,"wrapMode",f),P._protoOnChanged(Ii,"text",function(t){this._setText(t),this._updateSize()});var Ei,Ui,Li,Mi,Hi,ji,Ri,Bi;C=function(t){this._updateSize()};return P._protoOnChanged(Ii,"width",C),P._protoOnChanged(Ii,"height",C),P._protoOnChanged(Ii,"color",function(t){this.style("color",P.Color.normalize(t))}),Ii.$c=function(t){Ti.$c.call(this,t.$b={})},Ii.$s=function(t){var e=this;Ti.$s.call(e,t.$b),delete t.$b,e._replaceUpdater("width",function(){e.width=e.paintedWidth},[e,"paintedWidth"]),e._replaceUpdater("height",function(){e.height=e.paintedHeight},[e,"paintedHeight"]),e.completed()},x.core.model=function(){var t={};t.ModelUpdate=function(){this.rows=[]},t.ModelUpdate.prototype.constructor=t.ModelUpdate,t.ModelUpdate.prototype.reset=function(t){for(var e=t.count,i=this.rows=new Array(e),n=0;n<e;++n)i[n]=[n,!0]},t.ModelUpdate.prototype.insert=function(t,e,i){if(!(i<=e)){for(var n=i-e,o=this.rows,r=[e,0],a=0;a<n;++a)r.push([e+a,!0]);if(o.splice.apply(o,r),o.length!=t.count)throw new Error("unbalanced insert "+o.length+" + ["+e+"-"+i+"], model reported "+t.count)}},t.ModelUpdate.prototype.remove=function(t,e,i){if(!(i<=e)){var n=i-e,o=this.rows;if(o.splice(e,n),o.length!=t.count)throw new Error("unbalanced remove "+o.length+" + ["+e+"-"+i+"], model reported "+t.count)}},t.ModelUpdate.prototype.update=function(t,e,i){if(!(i<=e))for(var n=this.rows,o=e;o<i;++o)n[o][1]=!0},t.ModelUpdate.prototype.clear=function(){this.rows=[]},t.ModelUpdate.prototype.apply=function(n,t){for(var e=this.rows,o=0,r=0,a=0,s=!1,i=function(t,e,i){if(void 0===i&&(i=1),o!==t){if(0<a)switch(o){case 0:break;case 3:s=!0,n._updateItems(r,r+a);break;case 1:s=!0,n._insertItems(r,r+a);break;case 2:s=!0,n._removeItems(r,r+a)}o=t,r=e,a=i}else a+=i},c=e.length,l=n._items.length,d=0,h=0;h<c;){var p=(g=e[h])[0]+d;if(l<=h){i(1,h,c-l);break}if(p===h)i(g[1]?3:0,h),0!==d&&n._updateDelegateIndex(h),++h,++p;else if(h<p){i(2,h,u=p-h),d+=-u}else{var u=h-p;3===o&&u==a?(d+=u,o=1):(d+=u,h+=u,i(1,p+u,u))}}if(i(4,l),c<(l=n._items.length)?n._removeItems(c,l):l<c&&n._insertItems(l,c),!t&&n._items.length!=c)throw new Error("unbalanced items update, view: "+n._items.length+", update:"+c);for(var f=0;f<c;++f){var g;(g=e[f])[0]=f,g[1]=!1}return s};var e=t.ArrayModelWrapper=function(t){this.data=t,this.count=t.length};return e.prototype.get=function(t){return{value:this.data[t]}},e.prototype.on=function(){},e.prototype.removeListener=function(){},t}(),x.core.gradient=function(){var t={},e=function(t,e){this.color=P.Color.normalize(t),this.position=e},i=e.prototype;i.constructor=e,i.toString=function(){return this.color+" "+Math.floor(100*this.position)+"%"};var n=function(t,e){this.orientation=t,this.stops=[],this.type=e},o=n.prototype;return o.constructor=n,o.add=function(t){this.stops.push(t)},o.toString=function(){if(this.type===P.Gradient.Linear)return"linear-gradient("+this.orientation+","+this.stops.join()+")";if(this.type===P.Gradient.Conical){for(var t="conic-gradient(from "+this.orientation,e=0;e<this.stops.length;++e){var i=this.stops[e];t+=", "+i.color.hex()+" "+2*Math.PI*i.position+"rad"}return t+=")"}throw new Error("Gradient Type "+this.type+" is not supported")},t.GradientStop=e,t.Gradient=n,t}(),x.core.transform=function(){var t={},n=function(t,e){this.value=t,this.unit=e},e=n.prototype;e.constructor=n,e.toString=function(){var t=this.unit;return null!=t?this.value+t:this.value};var i=function(){this.transforms={}},o=i.prototype;return o.constructor=i,o.add=function(t,e,i){this.transforms[t]=new n(e,i)},o.toString=function(){var t=this.transforms,e="";for(var i in t){e+=i+"("+t[i]+") "}return e},t.Transform=i,t}(),x.html5.localstorage=(Ei={},(Ui=function(t){if(t&&t.name,this._storage=window.localStorage,!this._storage)throw new Error("no local storage support")}).prototype.get=function(t,e,i){var n=this._storage.getItem(t);null!==n?e(n):i(new Error("no item with name "+t))},Ui.prototype.set=function(t,e){this._storage.setItem(t,e)},Ui.prototype.erase=function(t,e){this._storage.removeItem(t)},Ei.createLocalStorage=function(t){return new Ui(t)},Ei.LocalStorage=Ui,Ei),x.html5.html=function(){var g={},u=window.Modernizr;g.capabilities={csstransforms3d:u.csstransforms3d,csstransforms:u.csstransforms,csstransitions:u.csstransitions,mouseEnterLeaveSupported:"netcast"!=x.core.os};var f=null;g.createAddRule=function(t){if((t.sheet||{}).insertRule){i=t.sheet;return function(e,t){try{i.insertRule(e+"{"+t+"}",i.cssRules.length)}catch(t){log("insertRule failed on rule "+e)}}}var i=t.styleSheet||t.sheet;return function(e,t){try{i.addRule(e,t)}catch(t){log("addRule failed on rule "+e)}}};var _=function(){this._cache={}},t=_.prototype;t.constructor=_,t.update=function(t,e,i){var n=this._cache,o=t._uniqueId,r=n[o];if(void 0!==r)r.data[e]=i,++r.size;else{var a={};a[e]=i,n[o]={data:a,element:t,size:1}}},t.pop=function(t){var e=t._uniqueId,i=this._cache[e];if(void 0!==i)return delete this._cache[e],i},t.apply=function(){var t=this._cache;for(var e in this._cache={},t){var i=t[e];i.element.updateStyle(i)}};var m=function(t){var e=document.createElement("style");e.type="text/css",document.head.appendChild(e),this.prefix=t+"C-",this.style=e,this.total=0,this.stats={},this.classes={},this.classes_total=0,this._addRule=g.createAddRule(e)},e=m.prototype;e.constructor=m,e.add=function(t){this.stats[t]=(this.stats[t]||0)+1,++this.total},e.register=function(t){var e=t.join(";"),i=this.classes,n=i[e];return void 0!==n||(n=i[e]=this.prefix+this.classes_total++,this._addRule("."+n,e)),n},e.classify=function(i){var n=this.total;if(n<10)return"";i.sort();var o=[],r=[],a=this.stats;return i.forEach(function(t,e){.05<a[t]/n&&(o.push(t),r.push(e))}),r.length<2?"":(r.forEach(function(t,e){i.splice(t-e,1)}),this.register(o))};var i={};0<=x.core.userAgent.toLowerCase().indexOf("webkit")&&(i.appearance="-webkit-appearance");var l=function(t){var e=i[t];return void 0===e&&(i[t]=e=window.Modernizr.prefixedCSS(t)),e};g.getPrefixedName=l;var r=["touchstart","touchmove","touchend","wheel","mousewheel","scroll"],a=!!u.passiveeventlisteners&&{passive:!0},s=["mousedown","mouseup","click","dblclick","mousemove","mouseover","mousewheel","mouseout","contextmenu","mouseenter","mouseleave","touchstart","touchmove","touchend","touchcancel"],c=function(n){var o=n.__domEventListeners;void 0===o&&(o=n.__domEventListeners={}),n.onListener("",function(t){var e=o[t]=n._context.wrapNativeCallback(function(){n.emitWithArgs(t,arguments)}),i=[t,e];(0<=r.indexOf(t)&&i.push(a),0<=s.indexOf(t))&&(1===(n.__mouseTouchHandlerCount=1+~~n.__mouseTouchHandlerCount)&&(n.style("pointer-events","auto"),n.style("touch-action","auto")));n.dom.addEventListener.apply(n.dom,i)},function(t){0<=s.indexOf(t)&&((n.__mouseTouchHandlerCount=~~n.__mouseTouchHandlerCount-1)<=0&&(n.style("pointer-events","none"),n.style("touch-action","none")));n.dom.removeEventListener(t,o[t])})},n={};g.loadExternalStylesheet=function(t){if(!n[t]){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.head.appendChild(e),n[t]=!0}};var d=0,h={};function p(t){return $manifest$html5$prefix+t}g.Element=function(t,e,i){if("string"==typeof e){void 0===i&&(i="");var n=e+"."+i;if(!h[n]){var o=document.createElement(e);($manifest$html5$prefix||i)&&o.classList.add(p(i)),$manifest$html5$prefix&&i&&o.classList.add(p("")),h[n]=o}this.dom=h[n].cloneNode(!1)}else this.dom=e;x.core.RAIIEventEmitter.apply(this),this._context=t,this._transitions={},this._class="",this._uniqueId=(++d).toString(36),this._firstChildIndex=0,c(this)};var o=g.Element.prototype=Object.create(x.core.RAIIEventEmitter.prototype);o.constructor=g.Element,o.addClass=function(t){this.dom.classList.add(t)},o.appendChildren=function(t){if(0<t.length){var e=document.createDocumentFragment();t.forEach(function(t){e.appendChild(t)}),this.dom.appendChild(e)}},o.removeChildren=function(t){var n=[],o=this.dom;return t.children.forEach(function(t){var e=t.element;if(void 0!==e){var i=e.dom;i.parentNode===o&&(o.removeChild(i),n.push(i))}}),n},o.setHtml=function(t,e){var i,n=this.dom;i=void 0!==e?this.removeChildren(e):[],n.innerHTML=t,this.appendChildren(i)},o.width=function(){return this.updateStyle(),this.dom.clientWidth},o.height=function(){return this.updateStyle(),this.dom.clientHeight},o.fullWidth=function(){return this.updateStyle(),this.dom.scrollWidth},o.fullHeight=function(){return this.updateStyle(),this.dom.scrollHeight};var y=["overflow","overflow-x","overflow-y"];o.style=function(t,e){var i=this._context._styleCache;if(void 0!==e)i.update(this,t,e),0<=y.indexOf(t)&&(i.update(this,"pointer-events","auto"),i.update(this,"touch-action","auto"));else{if("object"!=typeof t)throw new Error("cache is write-only");for(var n in t)0<=y.indexOf(t)&&(i.update(this,"pointer-events","auto"),i.update(this,"touch-action","auto")),i.update(this,n,t[n])}},o.setAttribute=function(t,e){return this.dom.setAttribute(t,e)},o.getAttribute=function(t){return this.dom.getAttribute(t)},o.removeAttribute=function(t,e){return this.dom.removeAttribute(t,e)},o.setProperty=function(t,e){return this.dom[t]=e},o.getProperty=function(t){return this.dom[t]};var v={left:"px",top:"px",width:"px",height:"px","border-radius":"px","border-width":"px","margin-left":"px","margin-top":"px","margin-right":"px","margin-bottom":"px","padding-left":"px","padding-top":"px","padding-right":"px","padding-bottom":"px",padding:"px"};o.forceLayout=function(){return this.updateStyle(),this.dom.offsetWidth|this.dom.offsetHeight},o.updateStyle=function(t){var e=this.dom;if(e&&(void 0!==t||void 0!==(t=this._context._styleCache.pop(this)))){var i=t.data,n=e.style;for(var o in i){var r=i[o],a=l(o),s=!1!==a?a:o;if(r instanceof x.core.Color?r=r.rgba():Array.isArray(r)&&(r=r.join(",")),"number"==typeof r){var c=v[o];void 0!==c&&(r+=c)}n[s]=r}}},o.append=function(t){this.dom.appendChild(t instanceof g.Element?t.dom:t)},o.prepend=function(t){this.dom.insertBefore(t instanceof g.Element?t.dom:t,this.dom.childNodes[0])},o.discard=function(){x.core.RAIIEventEmitter.prototype.discard.apply(this),this.remove()},o.remove=function(){var t=this.dom;t.parentNode&&t.parentNode.removeChild(t)},o.focus=function(){this.dom.focus()},o.blur=function(){this.dom.blur()},o.getScrollX=function(){return this.dom.scrollLeft},o.getScrollY=function(){return this.dom.scrollTop},o.setScrollX=function(t){var e=this.dom;setTimeout(function(){e.scrollLeft=t},1)},o.setScrollY=function(t){var e=this.dom;setTimeout(function(){e.scrollTop=t},1)},g.Document=function(t,e){x.core.RAIIEventEmitter.apply(this),this._context=t,this.dom=e,c(this)},(g.Document.prototype=Object.create(x.core.RAIIEventEmitter.prototype)).constructor=g.Document,g.Window=function(t,e){x.core.RAIIEventEmitter.apply(this),this._context=t,this.dom=e,c(this)};var b=g.Window.prototype=Object.create(x.core.RAIIEventEmitter.prototype);b.constructor=g.Window,b.width=function(){return this.dom.innerWidth},b.height=function(){return this.dom.innerHeight},b.scrollY=function(){return this.dom.scrollY},b.style=function(){},g.getElement=function(t,e){var i=document.getElementsByTagName(e);if(1!=i.length)throw new Error("no tag "+e+"/multiple tags");return new g.Element(t,i[0])},g.init=function(i){f=new x.html5.cache.Cache($),i._styleCache=new _;var t=i.options,e=i._prefix,n=t.id,o=t.tag||"div";e&&log("Context: using prefix",e+="-");var r=new x.html5.html.Document(i,document);i.document=r;var a,s,c=new x.html5.html.Window(i,window);i.window=c;var l=g,d=document.getElementById(n);null===d?(a=c.width()+1,s=c.height()+1,log("Context: window size: "+a+"x"+s),(d=l.createElement(i,o)).dom.id=n,c.on("resize",i.wrapNativeCallback(function(){i.width=c.width()+1,i.height=c.height()+1})),l.getElement(i,"body").append(d)):(a=(d=new l.Element(i,d)).width(),s=d.height(),log("Context: found element by id, size: "+a+"x"+s),c.on("resize",i.wrapNativeCallback(function(){i.width=d.width(),i.height=d.height()})));u.canvastext?(i._textCanvas=l.createElement(i,"canvas"),i._textCanvas.style("width",0),i._textCanvas.style("height",0),d.append(i._textCanvas),i._textCanvasContext="getContext"in i._textCanvas.dom?i._textCanvas.dom.getContext("2d"):null):i._textCanvasContext=null,i.element=d,i.width=a,i.height=s,c.on("scroll",i.wrapNativeCallback(function(){i.scrollY=c.scrollY()}));var h=function(t){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;log("fullscreen change event:",e),i.fullscreen=e};new Array("webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange").forEach(function(t){d.on(t,h,!0)});var p=function(t){var e=t.which||t.keyCode,i=P.keyCodes[e];return void 0===i&&t.code&&(i=t.code),i};c.on("keydown",i.wrapNativeCallback(function(t){var e=p(t);void 0!==e?(i.keyDown(e),i.processKey(e,t)&&t.preventDefault()):log("unhandled keycode "+keyCode+": ["+t.charCode+" "+t.keyCode+" "+t.which+" "+t.key+" "+t.code+" "+t.location+"]")})),c.on("keyup",i.wrapNativeCallback(function(t){var e=p(t);void 0!==e&&i.keyUp(e)})),c.on("orientationchange",i.wrapNativeCallback(function(){log("orientation changed event"),i.system.screenWidth=window.screen.width,i.system.screenHeight=window.screen.height})),i._styleClassifier=$manifest$cssAutoClassificator?new m(i._prefix):null},g.initSystem=function(t){var e=t._context,i=e.window;i.on("focus",e.wrapNativeCallback(function(){t.pageActive=!0})),i.on("blur",e.wrapNativeCallback(function(){t.pageActive=!1})),t.screenWidth=window.screen.width,t.screenHeight=window.screen.height},g.createElement=function(t,e,i){return new g.Element(t,e,i)},g.initRectangle=function(t){};var $=function(t,e){var i=new Image;i.onerror=function(){i.onload=null,i.onerror=null,e(null)},i.onload=function(){i.onload=null,i.onerror=null,e({width:i.naturalWidth,height:i.naturalHeight})},i.src=t};g.initImage=function(t){},g.loadImage=function(t,e){t.source.indexOf("?")<0?f.get(t.source,e):$(t.source,e)},g.initText=function(t){};var w=function(t,e){switch(t.verticalAlignment){case t.AlignTop:t._topPadding=0;break;case t.AlignBottom:t._topPadding=t.height-t.paintedHeight;break;case t.AlignVCenter:t._topPadding=(t.height-t.paintedHeight)/2}e["padding-top"]=t._topPadding,e.height=t.height-t._topPadding,t.element.style(e)};g.setText=function(t,e){t.element.setHtml(e,t)},g.layoutText=function(t){var e=t._context._textCanvasContext,i=t.wrapMode!==x.core.Text.NoWrap,n=t.element,o=(n.dom,t.textFormat===t.Html||0<=t.text.search(/[\<\&]/));if(!i&&null!==e&&!o){var r,a=t.font;r=a.pointSize?Math.round(96*a.pointSize/72):a.pixelSize,e.font=r+"px "+a.family;var s=e.measureText(t.text);return t.paintedWidth=s.width,t.paintedHeight=r*a.lineHeight,void w(t,{})}var c=n.removeChildren(t);i?t.element.style({height:"auto","padding-top":0}):t.element.style({width:"auto",height:"auto","padding-top":0});var l,d=n.fullWidth()+1,h=n.fullHeight()+1;d+1!==t.paintedWidth&&(t.paintedWidth=d),h+1!==t.paintedHeight&&(t.paintedHeight=h),l=i?{}:{width:t.width},w(t,l),n.appendChildren(c)},g.run=function(e,t){e.window.on("message",function(t){log("Context: received message from "+t.origin,t),e.message(t)}),e.window.on($manifest$expectRunContextEvent?"runContext":"load",function(){t()})},g.tick=function(t){t._styleCache.apply()};var C={width:"width",height:"height",x:"left",y:"top",viewX:"left",viewY:"top",opacity:"opacity",border:"border",radius:"border-radius",rotate:"transform",boxshadow:"box-shadow",transform:"transform",visible:"visibility",visibleInView:"visibility",background:"background",color:"color",backgroundImage:"background-image",font:"font"};return g.setAnimation=function(t,e,i){if(!g.capabilities.csstransitions||$manifest$cssDisableTransitions||i&&!i.cssTransition)return!1;var n=C[e];return void 0!==n&&function(t,e,i){var n=g,o=n.getPrefixedName("transition-property"),r=n.getPrefixedName("transition-delay"),a=n.getPrefixedName("transition-duration"),s=n.getPrefixedName("transition-timing-function"),c=t.element;c.forceLayout(),e=n.getPrefixedName(e)||e;var l=c._transitions,d=l[o]||[],h=l[a]||[],p=l[s]||[],u=l[r]||[],f=d.indexOf(e);return-1===f?i&&(d.push(e),h.push(i.duration+"ms"),p.push(i.easing),u.push(i.delay+"ms")):i&&i.active()?(h[f]=i.duration+"ms",p[f]=i.easing,u[f]=i.delay+"ms"):(d.splice(f,1),h.splice(f,1),p.splice(f,1),u.splice(f,1)),l[o]=d,l[a]=h,l[s]=p,l[r]=u,"orsay"!==t._context.system.os&&"netcast"!==t._context.system.os||(l["transition-property"]=d,l["transition-duration"]=h,l["transition-delay"]=u,l["transition-timing-function"]=p),t.style(l),!0}(t,n,i)},g.requestAnimationFrame=u.prefixed("requestAnimationFrame",window)||function(t){return setTimeout(t,0)},g.cancelAnimationFrame=u.prefixed("cancelAnimationFrame",window)||function(t){return clearTimeout(t)},g.enterFullscreenMode=function(t){try{return u.prefixed("requestFullscreen",t.dom)()}catch(t){log("enterFullscreenMode failed",t)}},g.exitFullscreenMode=function(){try{return window.Modernizr.prefixed("exitFullscreen",document)()}catch(t){log("exitFullscreenMode failed",t)}},g.inFullscreenMode=function(){return!!window.Modernizr.prefixed("fullscreenElement",document)},g.ajax=function(t,e){var i=e.url,n=e.error,o=e.headers,r=e.done,a=e.settings,s=new XMLHttpRequest;for(var c in null!=e.responseType&&(s.responseType=e.responseType),void 0!==e.withCredentials&&(s.withCredentials=e.withCredentials),n&&s.addEventListener("error",n),r&&s.addEventListener("load",r),s.open(e.method||"GET",i),a)s[c]=a[c];for(var c in o)s.setRequestHeader(c,o[c]);e.data?s.send(e.data):s.send()},g.fingerprint=function(t,e){var i=g;try{var n=i.createElement(t,"canvas");n.dom.width=2e3,n.dom.height=32;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZ /0123456789 abcdefghijklmnopqrstuvwxyz £©µÀÆÖÞßéöÿ –—‘“”„†•…‰™œŠŸž€ ΑΒΓΔΩαβγδω АБВГДабвгд ∀∂∈ℝ∧∪≡∞ ↑↗↨↻⇣ ┐┼╔╘░►☺♀ ﬁ�⑀₂ἠḂӥẄɐː⍎אԱა",r=n.dom.getContext("2d");r.textBaseline="top",r.font="20px 'Arial'",r.textBaseline="alphabetic",r.fillStyle="#fedcba",r.fillRect(0,0,2e3,32),r.fillStyle="#12345678",r.fillText(o,1.5,23.5,2e3),r.font="19.5px 'Arial'",r.fillStyle="#789abcde",r.fillText(o,1,22,2e3),e.update(n.dom.toDataURL())}catch(t){log("canvas test failed: "+t)}try{e.update(window.navigator.userAgent)}catch(t){log(t)}try{e.update(window.navigator.plugins)}catch(t){log(t)}try{e.update(window.navigator.mimeTypes)}catch(t){log(t)}try{e.update(window.navigator.language)}catch(t){log(t)}try{e.update(window.navigator.platform)}catch(t){log(t)}try{e.update(window.navigator.product)}catch(t){log(t)}try{e.update(window.navigator.productSub)}catch(t){log(t)}try{e.update(window.navigator.vendorSub)}catch(t){log(t)}try{e.update(window.navigator.hardwareConcurrency)}catch(t){log(t)}try{e.update(window.screen.availWidth)}catch(t){log(t)}try{e.update(window.screen.availHeight)}catch(t){log(t)}try{e.update(window.screen.colorDepth)}catch(t){log(t)}},g}(),x.html5.cache=function(){var t={},n=function(){return Math.floor((new Date).getTime()/1e3)},o=function(){this.created=n(),this.waiters=[],this.invoker=null};o.prototype.expired=function(t){return n()-this.created>=t},o.prototype.set=function(t){this.created=n();for(var e=this.invoker=x.core.safeCall(null,[t],function(t){log("cache entry callback failed: ",t,t.stack)});this.waiters.length;){var i=this.waiters;this.waiters=[],i.forEach(e)}this.waiters=null},o.prototype.wait=function(t){null!==this.invoker?this.invoker(t):this.waiters.push(t)};var e=function(t,e){if(!t)throw new Error("create callback is required");this._create=t,this._ttl=e||3600,this._cache={},setInterval(this.cleanup.bind(this),this._ttl/2*1e3)};return e.prototype.get=function(t,e){var i=this._cache[t];(void 0===i||i.expired(this._ttl))&&(this._cache[t]=i=new o,this._create(t,function(t){i.set(t)})),i.wait(e)},e.prototype.cleanup=function(){for(var t in this._cache){this._cache[t].expired(this._ttl)&&delete this._cache[t]}},t.Cache=e,t}(),x.html5.location=(Li={},(Mi=function(t){this._ui=t;var e=window.location;this.updateActualValues();var i=this,n=t._context;n.window.on("hashchange",function(){i._ui.hash=e.hash}.bind(this)),n.window.on("popstate",function(){i.updateActualValues()}.bind(this))}).prototype.updateActualValues=function(){var t=this._ui,e=t._context.window.dom;t.hash=e.location.hash,t.href=e.location.href,t.port=e.location.port,t.host=e.location.host,t.origin=e.location.origin,t.hostname=e.location.hostname,t.pathname=e.location.pathname,t.protocol=e.location.protocol,t.search=e.location.search,t.state=e.history.state},Mi.prototype.changeHref=function(t){this._ui._context.window.dom.location.href=t,this.updateActualValues()},Mi.prototype.reload=function(){this._ui._context.window.dom.location.reload()},Mi.prototype.pushState=function(t,e,i){var n=this._ui,o=n._context.window.dom;o.location.hostname?(o.history.pushState(t,e,i),this.updateActualValues()):(n._context.document.title=e,this._ui.state=t)},Li.createLocation=function(t){return new Mi(t)},Li.Location=Mi,Li),x.video.html5.backend=(Hi={},(ji=function(t){var e=t._context.createElement("video");e.dom.preload="metadata",this.element=e,this.ui=t,this.setEventListeners(),t.element.remove(),t.element=e,t.parent.element.append(t.element),this._xhr=new XMLHttpRequest,this._xhr.addEventListener("load",t._context.wrapNativeCallback(this.parseManifest).bind(this))}).prototype.dispose=function(){var t=this.ui;if(t){var e=t.element;e&&(e.remove(),t.element=null)}},ji.prototype.setEventListeners=function(){var t=this.element,e=t.dom,i=this.ui;t.on("play",function(){i.waiting=!1,i.paused=e.paused}.bind(i)),t.on("pause",function(){i.paused=e.paused}.bind(i)),t.on("ended",function(){i.finished()}.bind(i)),t.on("seeked",function(){log("seeked"),i.seeking=!1,i.waiting=!1}.bind(i)),t.on("canplay",function(){log("canplay",e.readyState),i.ready=e.readyState}.bind(i)),t.on("seeking",function(){log("seeking"),i.seeking=!0,i.waiting=!0}.bind(i)),t.on("waiting",function(){log("waiting"),i.waiting=!0}.bind(i)),t.on("stalled",function(){log("Was stalled",e.networkState),i.stalled=!0}.bind(i)),t.on("emptied",function(){log("Was emptied",e.networkState)}.bind(i)),t.on("volumechange",function(){i.muted=e.muted}.bind(i)),t.on("canplaythrough",function(){log("ready to play"),i.paused=e.paused}.bind(i)),t.on("suspend",function(){log("suspended")}),t.on("error",function(){if(log("Player error occurred",e.error,"src",i.source),e.error&&i.source)switch(i.error(e.error),log("player.error",e.error),e.error.code){case 1:log("MEDIA_ERR_ABORTED error occurred");break;case 2:log("MEDIA_ERR_NETWORK error occurred");break;case 3:log("MEDIA_ERR_DECODE error occurred");break;case 4:log("MEDIA_ERR_SRC_NOT_SUPPORTED error occurred");break;default:log("UNDEFINED error occurred")}}.bind(i)),t.on("timeupdate",function(){i.waiting=!1,i.stalled=!1,i.seeking||(i.progress=e.currentTime)}.bind(i)),t.on("durationchange",function(){var t=e.duration;log("Duration",t),i.duration=isFinite(t)?t:0}.bind(i)),t.on("progress",function(){var t=e.buffered.length-1;i.waiting=!1,0<=t&&(i.buffered=e.buffered.end(t)-e.buffered.start(t))}.bind(i)),this.setOption("autoplay",i.autoPlay)},ji.prototype.parseManifest=function(t){var e=t.target.responseText.split("\n"),i=this.ui.source,n=i.substring(0,i.lastIndexOf("/")+1),o=0;this._videoTracks=[{name:"auto",url:this.ui.source,id:o}],this._totalTracks={},this._audioTracksInfo=[];for(var r=0;r<e.length-1;++r){var a=e[r],s=e[r+1];if(0==a.indexOf("#EXT-X-STREAM-INF")){for(var c=a.split(","),l={url:0===s.indexOf("http")?s:n+s},d=0;d<c.length;++d)if(1<(f=c[d].split("=")).length)switch(f[0].trim().toLowerCase()){case"bandwidth":l.bandwidth=f[1].trim();break;case"audio":l.audio=f[1].trim().replace(/"/g,"");break;case"resolution":var h=f[1].split("x");l.width=h[0],l.height=h[1]}var p=l.width+"x"+l.height;this._totalTracks[p]||(this._totalTracks[p]=[]),this._totalTracks[p].push(l)}else if(0==a.indexOf("#EXT-X-MEDIA:TYPE=AUDIO")){c=a.split(",");var u={};for(d=0;d<c.length;++d){var f;if(1<(f=c[d].split("=")).length)switch(f[0].trim().toLowerCase()){case"group-id":u.id=f[1].trim().replace(/"/g,"");break;case"name":u.label=f[1].trim().replace(/"/g,"");break;case"language":u.language=f[1].trim().replace(/"/g,"");break;case"uri":u.url=f[1].trim()}}this._audioTracksInfo.push(u)}}for(var r in this._totalTracks){var g=this._totalTracks[r][0];g.id=++o,this._videoTracks.push(g)}},ji.prototype.getFileExtension=function(t){if(!t)return"";var e=t.toLowerCase(),i=t.indexOf("?");0<=i&&(e=e.substring(0,i));var n=e.lastIndexOf(".");return e.substring(n,e.length)},ji.prototype.setSource=function(t){this.ui.ready=!1,this._extension=this.getFileExtension(t),t&&this._xhr&&(".m3u8"===this._extension||".m3u"===this._extension)&&(this._xhr.open("GET",t),this._xhr.send());var e=t;this.ui.startPosition&&(e+="#t="+this.ui.startPosition),this.element.dom.src=e},ji.prototype.play=function(){this.element.dom.play()},ji.prototype.pause=function(){this.element.dom.pause()},ji.prototype.stop=function(){this.pause()},ji.prototype.seek=function(t){this.element.dom.currentTime+=t},ji.prototype.seekTo=function(t){this.element.dom.currentTime=t},ji.prototype.setVolume=function(t){this.element.dom.volume=t},ji.prototype.setMute=function(t){this.element.dom.muted=t},ji.prototype.setLoop=function(t){this.element.dom.loop=t},ji.prototype.setOption=function(t,e){"autoplay"===t?e?this.element.dom.setAttribute("autoplay",""):this.element.dom.removeAttribute("autoplay"):this.element.dom.setAttribute(t,e)},ji.prototype.setRect=function(t,e,i,n){},ji.prototype.setVisibility=function(t){log("VISIBILITY LOGIC MISSING HERE, visible:",t)},ji.prototype.setupDrm=function(t,e,i,n){log("Not implemented")},ji.prototype.getSubtitles=function(){for(var t=this.element.dom.textTracks,e=[],i=0;i<t.length;++i){var n=t[i];e.push({id:n.id,label:n.label,language:n.language})}return e},ji.prototype.getVideoTracks=function(){return this._videoTracks||[]},ji.prototype.getAudioTracks=function(){for(var t=this.element.dom.audioTracks||[],e=[],i=0;i<t.length;++i){var n=t[i],o=this._audioTracksInfo[i];e.push({id:i,name:n.label?n.label:o.name,language:n.language?n.language:o.language})}return log("getAudioTracks",e),e},ji.prototype.setAudioTrack=function(t){var e=this.element.dom.audioTracks;if(t<0||t>=e.length)log("Where is no track",t);else{log("Set audio track",e[t]);for(var i=0;i<e.length;++i)e[i].enabled=i===t}},ji.prototype.setVideoTrack=function(t){if(!this._videoTracks||this._videoTracks.length<=0)log("There is no available video track",this._videoTracks);else if(t<0||t>=this._videoTracks.length)log("Track with id",t,"not found");else{this.ui.waiting=!0;var e=this.ui.progress;log("Set video",this._videoTracks[t]),this.element.dom.src=this._videoTracks[t].url,this.seekTo(e)}},ji.prototype.setVideoTrack=function(t){if(!this._videoTracks||this._videoTracks.length<=0)log("There is no available video track",this._videoTracks);else if(t<0||t>=this._videoTracks.length)log("Track with id",t,"not found");else{this.ui.waiting=!0;var e=this.ui.progress;log("Set video",this._videoTracks[t]),this.element.dom.src=this._videoTracks[t].url,this.seekTo(e)}},ji.prototype.setBackgroundColor=function(t){var e=x.core.Color;this.element.dom.style.backgroundColor=new e(t).rgba()},Hi.createPlayer=function(t){return new ji(t)},Hi.probeUrl=function(t){return 50},Hi.Player=ji,Hi),x.web.device=(Bi=function(t){var e=t._context;if($manifest$system$fingerprint){var i=new a.fingerprint.fingerprint.Fingerprint;e.backend.fingerprint(e,i),t.deviceId=i.finalize(),log("deviceId",t.deviceId)}else{var n=e.system.os+"_"+e.system.browser;n=n.replace(/\s/g,""),t.deviceId=n+"_"+Math.random().toString(36).substr(2,9)}},(Ri={}).createDevice=function(t){return new Bi(t)},Ri.Device=Bi,Ri),x.controls.pure.format={currency:function(t,e,i){var n="\\d(?=(\\d{"+(i||3)+"})+"+(0<e?"\\.":"$")+")";return t.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$&,")},format:function(){var t=[].slice.call(arguments),e=t.shift();return t.reduce(function(t,e){return t.replace("%s",e)},e)}},i}(),l10n={},context=qml._context=new qml.core.Context(null,!1,{id:"qml-context-app",l10n:l10n,nativeContext:null});context.init(),context.start(new qml.src.UiApp(context)),context.run();
